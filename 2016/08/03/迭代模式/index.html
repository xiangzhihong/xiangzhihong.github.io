<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8">
    <meta name="baidu-site-verification" content="dIcXMeY8Ya">
    
    <title>迭代子模式 | 向志洪</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
    <meta name="keywords" content="前端, Web, 移动, 向志洪">
    <meta name="description" content="">

    
    
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.css">
    <!--[if lt IE 9]>
    <script src="/js/html5.js"></script>
    <![endif]-->
    <script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?fd459238242776d173cdc64918fb32f2";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    <script>var yunModuleEnv = true;</script>
    <script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
    
</head></html>
<body class="home">
    <!--[if lt IE 9]>
    <div class="browsehappy">
        当前网页 <strong>不支持</strong>
        你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.
    </div>
    <![endif]-->

    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="/">
                <div class="cover">
                    <span class="name">向志洪</span>
                    <span class="description">个人技术博客</span>
                </div>
            </a>
        </div>
        <div class="dropnav icon-paragraph-justify" id="JELON__btnDropNav"></div>
        <ul class="menu hidden" id="JELON__menu">
            
            <li rel="/2016/08/03/迭代模式/index.html" class="item">
                <a href="/" title="首页" class="icon-home">&nbsp;首页</a>
            </li>
            
            <li rel="/2016/08/03/迭代模式/index.html" class="item">
                <a href="/archives/" title="文章列表" class="icon-lab">&nbsp;文章列表</a>
            </li>
            
            <li rel="/2016/08/03/迭代模式/index.html" class="item">
                <a href="/about/" title="关于" class="icon-about">&nbsp;关于</a>
            </li>
            
            <li rel="/2016/08/03/迭代模式/index.html" class="item">
                <a href="/404/" title="留言" class="icon-comment">&nbsp;留言</a>
            </li>
            
        </ul>
        <div class="profile clearfix">
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/xiangzhihong" target="_blank">Github</a>
                        |
                    
                        <a href="http://tongji.baidu.com/web/welcome/login" target="_blank">站长统计</a>
                        |
                    
                        <a href="http://weibo.com/code_xzh" target="_blank">新浪微博</a>
                        |
                    
                </p>
                <p class="sns">
                    
                    <a href="javascript: void(0);" class="wechat">
                        <b>■</b>
                        公众号
                        <span class="popover">
                            <img src="/img/wechat_mp.jpg" width="120" height="120" alt="我的微信订阅号">
                            <i class="arrow"></i>
                        </span>
                    </a>
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="http://ohe65w0xx.bkt.clouddn.com/avert.png" alt="avatar" title="Jelon">
            </div>
        </div>
    </section>
</header>

    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 文章页 -->
<!-- 文章 -->
<article class="post article">
    <header class="text-center">
        <h3 class="post-title"><span>迭代子模式</span></h3>
    </header>
    <p class="post-meta text-center">
        xiangzhihong 发表于
        <time datetime="2016-08-02T16:00:00.000Z">2016-08-03</time>
    </p>
    <div class="post-content">
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>概念：在阎宏博士的《JAVA与模式》中关于迭代子模式的定义是这样的：迭代子模式又叫游标(Cursor)模式，是对象的行为模式。迭代子模式可以顺序地访问一个聚集中的元素而不必暴露聚集的内部表象（internal representation）。</p>
<h2 id="迭代子模式的意图及组成"><a href="#迭代子模式的意图及组成" class="headerlink" title="迭代子模式的意图及组成"></a>迭代子模式的意图及组成</h2><p>迭代子模式有两种实现方式，分别是白箱聚集与外禀迭代子和黑箱聚集于内禀迭代子。</p>
<h3 id="白箱聚集与外禀迭代子"><a href="#白箱聚集与外禀迭代子" class="headerlink" title="白箱聚集与外禀迭代子"></a>白箱聚集与外禀迭代子</h3><p>如果一个聚集的接口提供了可以用来修改聚集元素的方法，这个接口就是所谓的宽接口。<br>如果聚集对象为所有对象提供同一个接口，也就是宽接口的话，当然会满足迭代子模式对迭代子对象的要求。但是，这样会破坏对聚集对象的封装。这种提供宽接口的聚集叫做白箱聚集。聚集对象向外界提供同样的宽接口，如下图所示：<br><img src="http://img.blog.csdn.net/20161215214253592?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveGlhbmd6aGlob25nOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>由于聚集自己实现迭代逻辑，并向外部提供适当的接口，使得迭代子可以从外部控制聚集元素的迭代过程。这样一来迭代子所控制的仅仅是一个游标而已，这种迭代子叫做游标迭代子（Cursor Iterator）。由于迭代子是在聚集结构之外的，因此这样的迭代子又叫做外禀迭代子（Extrinsic Iterator）。<br>一个白箱聚集向外界提供访问自己内部元素的接口（称作遍历方法或者Traversing Method），从而使外禀迭代子可以通过聚集的遍历方法实现迭代功能。<br>　　因为迭代的逻辑是由聚集对象本身提供的，所以这样的外禀迭代子角色往往仅仅保持迭代的游标位置。<br>　　一个典型的由白箱聚集与外禀迭代子组成的系统如下图所示：<br><img src="http://img.blog.csdn.net/20161215214425814?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveGlhbmd6aGlob25nOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="迭代子模式组成"><a href="#迭代子模式组成" class="headerlink" title="迭代子模式组成"></a>迭代子模式组成</h3><p>迭代子模式的组成主要有以下几个角色：<br><strong>抽象迭代子(Iterator)角色</strong>：此抽象角色定义出遍历元素所需的接口。<br><strong>具体迭代子(ConcreteIterator)角色</strong>：此角色实现了Iterator接口，并保持迭代过程中的游标位置。<br><strong>聚集(Aggregate)角色</strong>：此抽象角色给出创建迭代子(Iterator)对象的接口。<br><strong>具体聚集(ConcreteAggregate)角色</strong>：实现了创建迭代子(Iterator)对象的接口，返回一个合适的具体迭代子实例。<br><strong>客户端(Client)角色</strong>：持有对聚集及其迭代子对象的引用，调用迭代子对象的迭代接口，也有可能通过迭代子操作聚集元素的增加和删除。</p>
<h4 id="代码实例"><a href="#代码实例" class="headerlink" title="代码实例"></a>代码实例</h4><p>抽象聚集角色类<br>这个角色规定出所有的具体聚集必须实现的接口。迭代子模式要求聚集对象必须有一个工厂方法，也就是createIterator()方法，以向外界提供迭代子对象的实例。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">public abstract class Aggregate &#123;  </div><div class="line">    /** </div><div class="line">     * 工厂方法，创建相应迭代子对象的接口 </div><div class="line">     */  </div><div class="line">    public abstract Iterator createIterator();  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>具体聚集角色类<br>实现了抽象聚集角色类所要求的接口，也就是createIterator()方法。此外，还有方法getElement()向外界提供聚集元素，而方法size()向外界提供聚集的大小等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">public class ConcreteAggregate extends Aggregate &#123;  </div><div class="line">      </div><div class="line">    private Object[] objArray = null;  </div><div class="line">    /** </div><div class="line">     * 构造方法，传入聚合对象的具体内容 </div><div class="line">     */  </div><div class="line">    public ConcreteAggregate(Object[] objArray)&#123;  </div><div class="line">        this.objArray = objArray;  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    @Override  </div><div class="line">    public Iterator createIterator() &#123;  </div><div class="line">          </div><div class="line">        return new ConcreteIterator(this);  </div><div class="line">    &#125;  </div><div class="line">    /** </div><div class="line">     * 取值方法：向外界提供聚集元素 </div><div class="line">     */  </div><div class="line">    public Object getElement(int index)&#123;  </div><div class="line">          </div><div class="line">        if(index &lt; objArray.length)&#123;  </div><div class="line">            return objArray[index];  </div><div class="line">        &#125;else&#123;  </div><div class="line">            return null;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">    /** </div><div class="line">     * 取值方法：向外界提供聚集的大小 </div><div class="line">     */  </div><div class="line">    public int size()&#123;  </div><div class="line">        return objArray.length;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>抽象迭代子角色类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">public interface Iterator &#123;  </div><div class="line">    /** </div><div class="line">     * 迭代方法：移动到第一个元素 </div><div class="line">     */  </div><div class="line">    public void first();  </div><div class="line">    /** </div><div class="line">     * 迭代方法：移动到下一个元素 </div><div class="line">     */  </div><div class="line">    public void next();  </div><div class="line">    /** </div><div class="line">     * 迭代方法：是否为最后一个元素 </div><div class="line">     */  </div><div class="line">    public boolean isDone();  </div><div class="line">    /** </div><div class="line">     * 迭代方法：返还当前元素 </div><div class="line">     */  </div><div class="line">    public Object currentItem();  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>具体迭代子角色类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">public class ConcreteIterator implements Iterator &#123;  </div><div class="line">    //持有被迭代的具体的聚合对象  </div><div class="line">    private ConcreteAggregate agg;  </div><div class="line">    //内部索引，记录当前迭代到的索引位置  </div><div class="line">    private int index = 0;  </div><div class="line">    //记录当前聚集对象的大小  </div><div class="line">    private int size = 0;  </div><div class="line">      </div><div class="line">    public ConcreteIterator(ConcreteAggregate agg)&#123;  </div><div class="line">        this.agg = agg;  </div><div class="line">        this.size = agg.size();  </div><div class="line">        index = 0;  </div><div class="line">    &#125;  </div><div class="line">    /** </div><div class="line">     * 迭代方法：返还当前元素 </div><div class="line">     */  </div><div class="line">    @Override  </div><div class="line">    public Object currentItem() &#123;  </div><div class="line">        return agg.getElement(index);  </div><div class="line">    &#125;  </div><div class="line">    /** </div><div class="line">     * 迭代方法：移动到第一个元素 </div><div class="line">     */  </div><div class="line">    @Override  </div><div class="line">    public void first() &#123;  </div><div class="line">          </div><div class="line">        index = 0;  </div><div class="line">    &#125;  </div><div class="line">    /** </div><div class="line">     * 迭代方法：是否为最后一个元素 </div><div class="line">     */  </div><div class="line">    @Override  </div><div class="line">    public boolean isDone() &#123;  </div><div class="line">        return (index &gt;= size);  </div><div class="line">    &#125;  </div><div class="line">    /** </div><div class="line">     * 迭代方法：移动到下一个元素 </div><div class="line">     */  </div><div class="line">    @Override  </div><div class="line">    public void next() &#123;  </div><div class="line">  </div><div class="line">        if(index &lt; size)  </div><div class="line">        &#123;  </div><div class="line">            index ++;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>客户端测试类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">public class Client &#123;  </div><div class="line">    public void operation()&#123;  </div><div class="line">        Object[] objArray = &#123;&quot;One&quot;,&quot;Two&quot;,&quot;Three&quot;,&quot;Four&quot;,&quot;Five&quot;,&quot;Six&quot;&#125;;  </div><div class="line">        //创建聚合对象  </div><div class="line">        Aggregate agg = new ConcreteAggregate(objArray);  </div><div class="line">        //循环输出聚合对象中的值  </div><div class="line">        Iterator it = agg.createIterator();  </div><div class="line">        while(!it.isDone())&#123;  </div><div class="line">            System.out.println(it.currentItem());  </div><div class="line">            it.next();  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">    public static void main(String[] args) &#123;  </div><div class="line">          </div><div class="line">        Client client = new Client();  </div><div class="line">        client.operation();  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="黑箱聚集与内禀迭代子"><a href="#黑箱聚集与内禀迭代子" class="headerlink" title="黑箱聚集与内禀迭代子"></a>黑箱聚集与内禀迭代子</h3><p>如果一个聚集的接口没有提供修改聚集元素的方法，这样的接口就是所谓的窄接口。<br>　　聚集对象为迭代子对象提供一个宽接口，而为其他对象提供一个窄接口。换言之，聚集对象的内部结构应当对迭代子对象适当公开，以便迭代子对象能够对聚集对象有足够的了解，从而可以进行迭代操作。但是，聚集对象应当避免向其他的对象提供这些方法，因为其他对象应当经过迭代子对象进行这些工作，而不是直接操控聚集对象。<br><img src="http://img.blog.csdn.net/20161215215023673?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveGlhbmd6aGlob25nOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>在JAVA语言中，实现双重接口的办法就是将迭代子类设计成聚集类的内部成员类。这样迭代子对象将可以像聚集对象的内部成员一样访问聚集对象的内部结构。下面给出一个示意性的实现，说明这种双重接口的结构时怎么样产生的，以及使用了双重接口结构之后迭代子模式的实现方案。这种同时保证聚集对象的封装和迭代子功能的实现的方案叫做黑箱实现方案。<br>　　由于迭代子是聚集的内部类，迭代子可以自由访问聚集的元素，所以迭代子可以自行实现迭代功能并控制对聚集元素的迭代逻辑。由于迭代子是在聚集的结构之内定义的，因此这样的迭代子又叫做内禀迭代子（Intrinsic Iterator）。<br>　　为了说明黑箱方案的细节，这里给出一个示意性的黑箱实现。在这个实现里，聚集类ConcreteAggregate含有一个内部成员类ConcreteIterator，也就是实现了抽象迭代子接口的具体迭代子类，同时聚集并不向外界提供访问自己内部元素的方法。</p>
<h4 id="代码实例-1"><a href="#代码实例-1" class="headerlink" title="代码实例"></a>代码实例</h4><p>抽象聚集角色类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">public abstract class Aggregate &#123;</div><div class="line">    /**</div><div class="line">     * 工厂方法，创建相应迭代子对象的接口</div><div class="line">     */</div><div class="line">    public abstract Iterator createIterator();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>抽象迭代子角色类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">public interface Iterator &#123;</div><div class="line">    /**</div><div class="line">     * 迭代方法：移动到第一个元素</div><div class="line">     */</div><div class="line">    public void first();</div><div class="line">    /**</div><div class="line">     * 迭代方法：移动到下一个元素</div><div class="line">     */</div><div class="line">    public void next();</div><div class="line">    /**</div><div class="line">     * 迭代方法：是否为最后一个元素</div><div class="line">     */</div><div class="line">    public boolean isDone();</div><div class="line">    /**</div><div class="line">     * 迭代方法：返还当前元素</div><div class="line">     */</div><div class="line">    public Object currentItem();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>具体聚集角色类，实现了抽象聚集角色所要求的接口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">public class ConcreteAggregate extends Aggregate &#123;</div><div class="line">    </div><div class="line">    private Object[] objArray = null;</div><div class="line">    /**</div><div class="line">     * 构造方法，传入聚合对象的具体内容</div><div class="line">     */</div><div class="line">    public ConcreteAggregate(Object[] objArray)&#123;</div><div class="line">        this.objArray = objArray;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    @Override</div><div class="line">    public Iterator createIterator() &#123;</div><div class="line"></div><div class="line">        return new ConcreteIterator();</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 内部成员类，具体迭代子类</div><div class="line">     */</div><div class="line">    private class ConcreteIterator implements Iterator</div><div class="line">    &#123;</div><div class="line">        //内部索引，记录当前迭代到的索引位置</div><div class="line">        private int index = 0;</div><div class="line">        //记录当前聚集对象的大小</div><div class="line">        private int size = 0;</div><div class="line">        /**</div><div class="line">         * 构造函数</div><div class="line">         */</div><div class="line">        public ConcreteIterator()&#123;</div><div class="line">            </div><div class="line">            this.size = objArray.length;</div><div class="line">            index = 0;</div><div class="line">        &#125;</div><div class="line">        /**</div><div class="line">         * 迭代方法：返还当前元素</div><div class="line">         */</div><div class="line">        @Override</div><div class="line">        public Object currentItem() &#123;</div><div class="line">            return objArray[index];</div><div class="line">        &#125;</div><div class="line">        /**</div><div class="line">         * 迭代方法：移动到第一个元素</div><div class="line">         */</div><div class="line">        @Override</div><div class="line">        public void first() &#123;</div><div class="line">            </div><div class="line">            index = 0;</div><div class="line">        &#125;</div><div class="line">        /**</div><div class="line">         * 迭代方法：是否为最后一个元素</div><div class="line">         */</div><div class="line">        @Override</div><div class="line">        public boolean isDone() &#123;</div><div class="line">            return (index &gt;= size);</div><div class="line">        &#125;</div><div class="line">        /**</div><div class="line">         * 迭代方法：移动到下一个元素</div><div class="line">         */</div><div class="line">        @Override</div><div class="line">        public void next() &#123;</div><div class="line"></div><div class="line">            if(index &lt; size)</div><div class="line">            &#123;</div><div class="line">                index ++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>客户端测试类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">public class Client &#123;</div><div class="line"></div><div class="line">    public void operation()&#123;</div><div class="line">        Object[] objArray = &#123;&quot;One&quot;,&quot;Two&quot;,&quot;Three&quot;,&quot;Four&quot;,&quot;Five&quot;,&quot;Six&quot;&#125;;</div><div class="line">        //创建聚合对象</div><div class="line">        Aggregate agg = new ConcreteAggregate(objArray);</div><div class="line">        //循环输出聚合对象中的值</div><div class="line">        Iterator it = agg.createIterator();</div><div class="line">        while(!it.isDone())&#123;</div><div class="line">            System.out.println(it.currentItem());</div><div class="line">            it.next();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        </div><div class="line">        Client client = new Client();</div><div class="line">        client.operation();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="使用迭代子模式的优点"><a href="#使用迭代子模式的优点" class="headerlink" title="使用迭代子模式的优点"></a>使用迭代子模式的优点</h2><p>　（1）迭代子模式简化了聚集的接口。迭代子具备了一个遍历接口，这样聚集的接口就不必具备遍历接口。<br>　　（2）每一个聚集对象都可以有一个或多个迭代子对象，每一个迭代子的迭代状态可以是彼此独立的。因此，一个聚集对象可以同时有几个迭代在进行之中。<br>　　（3）由于遍历算法被封装在迭代子角色里面，因此迭代的算法可以独立于聚集角色变化。</p>
    </div>
    <p class="post-meta">
        <span class="post-cat">分类：
            <a class="cat-link" href="/categories/设计模式/">设计模式</a>
        </span>
        <span class="post-tags">
            标签：
            <a href="/tags/设计模式/" title="设计模式">设计模式</a>
        </span>
    </p>
</article>
<div class="article-share clearfix text-center">
    <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</div>

<!-- 上一篇/下一篇 -->

<div class="article-nav clearfix">
    
    <span class="prev fl">
        上一篇<br>
        <a href="/2016/08/05/React Native调用原生系统相机/">
            
                React Native调用Android相机图库
            
        </a>
    </span>
    

    
    <span class="next fr">
        下一篇<br>
        <a href="/2016/07/25/Google VR技术大揭秘/">
            
                Google VR技术大揭秘
            
        </a>
    </span>
    
</div>
<!-- 文章评论 -->
<div id="comments" class="comments cloud-tie-wrapper"></div>
    <script>
    var cloudTieConfig = {
      url: document.location.href, 
      sourceId: "迭代模式",
      productKey: "c06bb9930e6f4b38a9997cb9bd17aba5",
      target: "comments"
    };
    var yunManualLoad = true;
    Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
    </script>
            </div>

        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">
    <section class="widget">
        <h3 class="widget-hd"><strong>文章分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
    <li>
        <a href="/categories/Android/">Android</a>
        <span class="badge">(10)</span>
    </li>
    
    <li>
        <a href="/categories/Android/系统/">系统</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/Angular2/">Angular2</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/React-Native/">React Native</a>
        <span class="badge">(9)</span>
    </li>
    
    <li>
        <a href="/categories/Java/">Java</a>
        <span class="badge">(2)</span>
    </li>
    
    <li>
        <a href="/categories/VR/">VR</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/前端/">前端</a>
        <span class="badge">(6)</span>
    </li>
    
    <li>
        <a href="/categories/Angular2/前端/">前端</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/Spring/">Spring</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/ios/">ios</a>
        <span class="badge">(7)</span>
    </li>
    
    <li>
        <a href="/categories/Google/">Google</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/Google/VR/">VR</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/技术人生/">技术人生</a>
        <span class="badge">(2)</span>
    </li>
    
    <li>
        <a href="/categories/机器学习/">机器学习</a>
        <span class="badge">(2)</span>
    </li>
    
    <li>
        <a href="/categories/小程序/">小程序</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/android/">android</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/设计模式/">设计模式</a>
        <span class="badge">(1)</span>
    </li>
    
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item" href="/tags/Android/" title="Android">Android (7)</a>
  
    <a class="tag-item" href="/tags/高仿/" title="高仿">高仿 (4)</a>
  
    <a class="tag-item" href="/tags/新特性/" title="新特性">新特性 (2)</a>
  
    <a class="tag-item" href="/tags/深入系统/" title="深入系统">深入系统 (1)</a>
  
    <a class="tag-item" href="/tags/系统服务/" title="系统服务">系统服务 (1)</a>
  
    <a class="tag-item" href="/tags/混淆打包/" title="混淆打包">混淆打包 (1)</a>
  
    <a class="tag-item" href="/tags/硬件/" title="硬件">硬件 (1)</a>
  
    <a class="tag-item" href="/tags/Angular2/" title="Angular2">Angular2 (1)</a>
  
    <a class="tag-item" href="/tags/前端开发/" title="前端开发">前端开发 (3)</a>
  
    <a class="tag-item" href="/tags/android/" title="android">android (4)</a>
  
    <a class="tag-item" href="/tags/React-Native/" title="React Native">React Native (7)</a>
  
    <a class="tag-item" href="/tags/FlexBox布局/" title="FlexBox布局">FlexBox布局 (1)</a>
  
    <a class="tag-item" href="/tags/Java/" title="Java">Java (2)</a>
  
    <a class="tag-item" href="/tags/垃圾回收/" title="垃圾回收">垃圾回收 (1)</a>
  
    <a class="tag-item" href="/tags/Google/" title="Google">Google (2)</a>
  
    <a class="tag-item" href="/tags/VR/" title="VR">VR (2)</a>
  
    <a class="tag-item" href="/tags/Node/" title="Node">Node (2)</a>
  
    <a class="tag-item" href="/tags/OpenGL/" title="OpenGL">OpenGL (1)</a>
  
    <a class="tag-item" href="/tags/eact-Native/" title="eact Native">eact Native (1)</a>
  
    <a class="tag-item" href="/tags/Promise/" title="Promise">Promise (1)</a>
  
    <a class="tag-item" href="/tags/前端/" title="前端">前端 (4)</a>
  
    <a class="tag-item" href="/tags/打包/" title="打包">打包 (1)</a>
  
    <a class="tag-item" href="/tags/调试/" title="调试">调试 (1)</a>
  
    <a class="tag-item" href="/tags/原生/" title="原生">原生 (1)</a>
  
    <a class="tag-item" href="/tags/Spring/" title="Spring">Spring (2)</a>
  
    <a class="tag-item" href="/tags/入门/" title="入门">入门 (2)</a>
  
    <a class="tag-item" href="/tags/ios/" title="ios">ios (7)</a>
  
    <a class="tag-item" href="/tags/Swift/" title="Swift">Swift (1)</a>
  
    <a class="tag-item" href="/tags/swift/" title="swift">swift (1)</a>
  
    <a class="tag-item" href="/tags/AR/" title="AR">AR (1)</a>
  
    <a class="tag-item" href="/tags/Xcode/" title="Xcode">Xcode (2)</a>
  
    <a class="tag-item" href="/tags/https/" title="https">https (1)</a>
  
    <a class="tag-item" href="/tags/webpack/" title="webpack">webpack (1)</a>
  
    <a class="tag-item" href="/tags/gulp/" title="gulp">gulp (1)</a>
  
    <a class="tag-item" href="/tags/gif/" title="gif">gif (1)</a>
  
    <a class="tag-item" href="/tags/mac/" title="mac">mac (1)</a>
  
    <a class="tag-item" href="/tags/环境/" title="环境">环境 (1)</a>
  
    <a class="tag-item" href="/tags/原理/" title="原理">原理 (1)</a>
  
    <a class="tag-item" href="/tags/知识库/" title="知识库">知识库 (1)</a>
  
</div>
    </section>
    

    
    <!-- 我的微博 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>我的微博</strong></h3>
        <div class="widget-bd" style="position: relative">
  <div id="myWeiboLoading" class="text-center" style="position:absolute;top:0;left:0;right:0;bottom:0;line-height:50px;font-size:12px;background-color:#fff;z-index:9">微博加载中...</div>
  <iframe width="100%" height="550" class="share_self" frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&amp;width=0&amp;height=550&amp;fansRow=2&amp;ptype=1&amp;speed=0&amp;skin=4&amp;isTitle=1&amp;noborder=1&amp;isWeibo=1&amp;isFans=1&amp;uid=1831462560&amp;verifier=5192ec39&amp;dpc=1"></iframe>
  <script>
  (function () {
    var oMyWeibo = document.getElementById('myWeibo');
    var oMyWeiboLoading = document.getElementById('myWeiboLoading');
    var isIE = /msie/i.test(navigator.userAgent) && !window.opera;
    var timer = null;
    if (isIE) {
      oMyWeibo.onreadystatechange = function(){
        if(oMyWeibo.readyState === 'loaded' || oMyWeibo.readyState === 'complete'){
          timer = setTimeout(function () {
            oMyWeiboLoading.parentNode.removeChild(oMyWeiboLoading);
            timer = null;
          }, 300);
        }
      };
    } else {
      oMyWeibo.onload = function () {
        timer = setTimeout(function () {
          oMyWeiboLoading.parentNode.removeChild(oMyWeiboLoading);
          timer = null;
        }, 300);
      };
    }
  })();
  </script>
</div>
    </section>
    

    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>友情链接</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="http://blog.csdn.net/xiangzhihong8/" target="_blank" title="csdn个人博客">csdn博客</a>
        </li>
    
        <li>
            <a href="https://yq.aliyun.com/u/xiangzhihong" target="_blank" title="阿里云技术博客">阿里云博客</a>
        </li>
    
</ul>
    </section>
    
</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">
    &copy;
    
        2016-2017
    

    <a href="/">Jelon Loves You</a>
</footer>
<div class="back-to-top" id="JELON__backToTop" title="返回顶部">返回顶部</div>
<!-- 添加百度自动推送 -->
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->
<script src="/js/main.js"></script>
</body>
