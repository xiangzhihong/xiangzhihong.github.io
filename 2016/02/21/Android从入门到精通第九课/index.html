<!DOCTYPE HTML>
<html>
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no">
    <link rel="dns-prefetch" href="//t11.baidu.com">
    <!--SEO-->



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>JNI基础 | 向志洪</title>


    <link rel="alternate" href="/atom.xml" title="向志洪" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css?rev=9.12.0">


<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css?rev=3.3.4">
<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">
    <div class="hide">
    <script src="https://s4.cnzz.com/z_stat.php?id=1261768793&web_id=1262140174" language="JavaScript"></script>
    </div>
    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?13764659765";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head></html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
    <header class="main-header">
    <div class="main-header-box">
        <a class="branding" href="/" title="">
            <img src="/img/header_logo.png" alt="Snippet 博客主题">
        </a>
        <h2 class="text-hide">Snippet主题</h2>
        <img src="/img/header_logo.png" alt="Snippet 博客主题" class="hide">
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="fa fa-bars"></i>
                    </span>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class=""><a href="/">首页</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/前端/">前端</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/后端/">后端</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/编程语言/">编程语言</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/Android/">Android</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/iOS/">iOS</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/React Native/">React Native</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/小程序/">小程序</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/杂谈/">杂谈</a></li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="JNI基础">
            
            JNI基础
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <span>Android</span>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            Android
            
        </span>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">2016/02/21</span>
    </span>
</div>
            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>638</strong>天之前发表，文中内容可能已经过时。
            </p>
            
    </div>
    
    <div class="post-body">
        <h1 id="JNI基础"><a href="#JNI基础" class="headerlink" title="JNI基础"></a>JNI基础</h1><ol>
<li><p>将java中的字符串转换成C中字符串的工具方法              </p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">char</span>*   <span class="title">Jstring2CStr</span><span class="params">(JNIEnv*   env,   jstring   jstr)</span></span>&#123;</div><div class="line">     <span class="keyword">char</span>*   rtn   =   <span class="literal">NULL</span>;</div><div class="line">     jclass   clsstring   =   (*env)-&gt;FindClass(env,<span class="string">"java/lang/String"</span>);</div><div class="line">     jstring   strencode   =   (*env)-&gt;NewStringUTF(env,<span class="string">"GB2312"</span>);</div><div class="line">     jmethodID   mid   =   (*env)-&gt;GetMethodID(env,clsstring,   <span class="string">"getBytes"</span>,   <span class="string">"(Ljava/lang/String;)[B"</span>);</div><div class="line">     jbyteArray   barr=   (jbyteArray)(*env)-&gt;CallObjectMethod(env,jstr,mid,strencode); <span class="comment">// String .getByte("GB2312");</span></div><div class="line">     jsize   alen   =   (*env)-&gt;GetArrayLength(env,barr);</div><div class="line">     jbyte*   ba   =   (*env)-&gt;GetByteArrayElements(env,barr,JNI_FALSE);</div><div class="line">     <span class="keyword">if</span>(alen   &gt;   <span class="number">0</span>)</div><div class="line">     &#123;</div><div class="line">      rtn   =   (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(alen+<span class="number">1</span>);         <span class="comment">//"\0"</span></div><div class="line">      <span class="built_in">memcpy</span>(rtn,ba,alen);</div><div class="line">      rtn[alen]=<span class="number">0</span>;</div><div class="line">     &#125;</div><div class="line">     (*env)-&gt;ReleaseByteArrayElements(env,barr,ba,<span class="number">0</span>);  <span class="comment">//</span></div><div class="line">     <span class="keyword">return</span> rtn;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>程序被运行要经历两个步骤(1.编译 2.链接)<br> 编译就是将源文件编译成二进制代码，而链接则是将二进制代码转换成可执行的文件如.exe等头文件.(函数的声明,函数的清单文件)作用: 给编译器看的.<br> 库函数: 头文件里面函数的实现.<br> 作用:给连接器看的.    </p>
</li>
<li><p>jni开发的常见错误:<br> 错误1: 忘记编写android.mk文件 unknown file: ./jni/Android.mk<br> Android NDK: Your APP_BUILD_SCRIPT points to an unknown file: ./jni/Android.mk<br> /cygdrive/c/android-ndk-r7b/build/core/add-application.mk:133: Android NDK: Aborting…    。 停止。          </p>
<p> 错误2:  ndk-build 没有任何反应.<br> 忘记配置android.mk脚本       </p>
<p> 错误3: $ ndk-build jni/Android.mk:4:  遗漏分隔符 。 停止。<br>中文的回车或者换行         </p>
<p> 错误4:java.lang.UnsatisfiedLinkError: hello<br> 忘记加载了c代码的.so库 或者 函数的签名不正确,没有找到与之对应的c代码      </p>
<p> 错误5:07-30 java.lang.UnsatisfiedLinkError: Library Hel1o not found<br> 没有找到对应的c代码库     </p>
<p> 错误6: <strong><em> </em></strong> <strong><em> </em></strong> <strong><em> </em></strong> <strong><em> </em></strong> <strong><em> </em></strong> <strong><em> </em></strong> <strong><em> </em></strong> <strong><em> </em></strong><br> 07-30 11:53:17.898: INFO/DEBUG(31): Build fingerprint:<br> ‘generic/sdk/generic/:2.2/FRF91/43546:eng/test-keys’<br> c代码里面有严重的逻辑错误,产生内存的泄露.    </p>
<p> 错误7:<br> make: <em>*</em> [obj/local/armeabi/objs/Hello/Hello.o] Error 1<br> 编译的时候 程序出现了问题,c语言的语法有问题<br> c语言代码编译错误的时候 先去解决第一个错误. </p>
</li>
<li><p>Java调用JNI的前提<br> 开发所使用的电脑(windows系统, x86的CPU)<br> 目标代码: android手机上运行的.( linux系统, arm的CPU)<br> 所以我们要模拟手机的系统,手机的处理器，生成手机上可以运行的二进制代码这就要用到交叉编译;<br> 根据运行的设备的不同，可以将cpu分为：          </p>
<ul>
<li>arm结构 ：主要在移动手持、嵌入式设备上。      </li>
<li>x86结构 ： 主要在台式机、笔记本上使用。如Intel和AMD的CPU 。<br>交叉编译: 在一种操作系统平台或者cpu平台下 编译生成 另外一个平台(cpu)可以运行的二进制代码.(使用NDK中的ndk-build命令)     </li>
</ul>
</li>
</ol>
<ul>
<li><p>工具一:  交叉编译的工具链: NDK<br>  NDK全称：Native Development Kit 。           </p>
<ul>
<li><p>NDK是一系列工具的集合，它有很多作用。          </p>
<ul>
<li>首先，NDK可以帮助开发者快速开发C(或C++)的动态库。      </li>
<li>其次，NDK集成了交叉编译器。使用NDK，我们可以将要求高性能的应用逻辑使用C开发，从而提高应用程序的执行效率。     </li>
</ul>
<p>NDK工具是提供给Linux系统用的(随着版本的升级也可以直接在Windows下使用，但是现在仍不完善有bug)，<br>所以要在windows下使用ndk的工具,必须要提供一个工具(linux环境的模拟器)</p>
</li>
</ul>
</li>
<li><p>工具二:  cygwin(windows下linux系统环境的模拟器, 主要是为了能够运行ndk的工具)<br>  安装 devel shell<br>  <img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/jni_cygwin.png?raw=true" alt="image"><br>  linux 特点:所有的设备 硬件 都是以文件的方式定义的.<br>  安装完后进入<code>cygwin</code>打印<code>make -v</code>命令如果能打印出<code>GNU Make ...</code>就说明安装木问题了。</p>
</li>
<li><p>工具三: cdt(c/c++ develop tools)  eclipse 的一个插件  用来让c\c++代码 语法高亮显示.<br>  adt(android develop tools)          </p>
</li>
<li><p>工具四：<br>  为了不用每次使用ndk-build命令都要进入到ndk的安装目录，这里要进行Path变量的配置。<br>  配置cygwin的环境变量: 在cygwin安装目录,etc目录,profile的文件 32行 添加ndk工具所在的目录.<br>  <code>PATH=&quot;/usr/local/bin:/usr/bin:/cygdrive/d/android-ndk-r7b:${PATH}&quot;</code>在这个后面加上:ndk-build的路径(注意：在linux中路径的分隔符不是分号而是冒号)，<br>  改成这样<br>  <code>PATH=&quot;/usr/local/bin:/usr/bin:${PATH}:/cygdrive/d/android-ndk-r7b&quot;</code>//注意这里的路径是在linux系统下的ndk路径而不是windows下的路径,/cygdrive/d/是在linux下看到的d盘。</p>
</li>
</ul>
<p>###JNI开发步骤：</p>
<ol>
<li>创建一个android工程</li>
<li>JAVA代码中写声明native 方法 public native String helloFromJNI();</li>
<li>用javah工具生成头文件</li>
<li>创建jni目录,引入头文件,根据头文件实现c代码</li>
<li>编写Android.mk文件</li>
<li>Ndk编译生成动态库</li>
<li>Java代码load 动态库.调用native代码</li>
</ol>
<p>###JNI开发之Java中调用C代码步骤</p>
<ol>
<li><p>在java中定义一个要调用的C的方法(本地方法)<br> //1.定义一个native的方法<br> <code>public native String helloFromC();</code></p>
</li>
<li><p>在工程中新建一个jni文件夹(然后在这个文件夹中写c代码，在C中实现java里面定义的c方法默认的时候是自己手写c的方法名，<br> 但是很麻烦这里要参考七里面提供的方式，用javah编译后，然后拷贝h的头文件到jni文件夹中，在从h文件拷贝方法的名字，然后实现该方法).  </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">	C:\Users\Administrator&gt;javah -help</div><div class="line">	用法:</div><div class="line">	  javah [options] &lt;classes&gt;</div><div class="line">	其中, [options] 包括:</div><div class="line">	  -o &lt;file&gt;                输出文件 (只能使用 -d 或 -o 之一)</div><div class="line">	  -d &lt;dir&gt;                 输出目录</div><div class="line">	  -v  -verbose             启用详细输出</div><div class="line">	  -h  --help  -?           输出此消息</div><div class="line">	  -version                 输出版本信息</div><div class="line">	  -jni                     生成 JNI 样式的标头文件 (默认值)</div><div class="line">	  -force                   始终写入输出文件</div><div class="line">	  -classpath &lt;path&gt;        从中加载类的路径</div><div class="line">	  -cp &lt;path&gt;               从中加载类的路径</div><div class="line">	  -bootclasspath &lt;path&gt;    从中加载引导类的路径</div><div class="line">	```	</div><div class="line">	`#include &lt;stdio.h&gt;`         </div><div class="line">	`#include &lt;jni.h&gt;`        </div><div class="line">	//这个方法的名字的写法固定Java_表示这个方法由Java调用,cn_itcast_ndk表示java的包名DemoActivity表示</div><div class="line">	//java中调用这个方法的类名helloFromC表示java中调用这个方法的方法名字</div><div class="line">	```java</div><div class="line">	jstring Java_cn_itcast_ndk_DemoActivity_helloFromC (JNIEnv* env , jobject obj)&#123;//这两个参数是固定必不可少的</div><div class="line">		   //return (*(*env)).NewStringUTF(env,&quot;hello from c!&quot;);//调用NewStringUTF这个方法new出来一个java中的String类型的字符串</div><div class="line">		   return (*env)-&gt;NewStringUTF(env,&quot;hello from c!&quot; );//这个写法和上面这个注释掉的一样，只是更简洁一点</div><div class="line">	&#125;</div><div class="line">	```	</div><div class="line">	</div><div class="line">3. 在jni文件夹中编写android.mk文件，在这个文件夹中声明要编译的c文件名以后编译后生成的文件名   </div><div class="line">	```c</div><div class="line">	LOCAL_PATH := $(call my-dir)  //将jni所在的目录返回去到LOCAL_PATH</div><div class="line">	#clear_vars 一个函数 初始化编译工具链的所有的变量.</div><div class="line">	#特点:清空所有的以LOCAL_开头的变量,但是不会清空LOCAL_PATH的变量</div><div class="line">	 include $(CLEAR_VARS)  </div><div class="line">	#指定编译后的文件的名称 符合linux系统下makefile的语法. </div><div class="line">	LOCAL_MODULE    := Hello</div><div class="line">	#指定编译的源文件的名称 ,编译器非常智能</div><div class="line">	LOCAL_SRC_FILES := Hello.c</div><div class="line">	  #指定编译后的文件的类型. 默认编译成动态库 BUILD_SHARED_LIBRARY 扩展名.so .so代码体积很小  </div><div class="line">	#                            静态库 BUILD_STATIC_LIBRARY 扩展名.a  .a代码体积很大</div><div class="line">	include $(BUILD_SHARED_LIBRARY)</div></pre></td></tr></table></figure>
</li>
<li><p>cmd进入到当前的工程的文件夹中(也可以进入到当前工程的jni目录中)，然后运行ndk-build工具就能将c文件编译成一个可执行的二进制文件. -&gt;.so，<br> 注意用ndk-build编译之后一定要刷新，不然eclipse会缓存旧的不加载新的进来<br> <img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/ndk_build.png?raw=true" alt="image">    </p>
</li>
</ol>
<ol>
<li><p>刷新工程，就能看到多出了两个文件夹</p>
</li>
<li><p>在java中将要调用的c代码加载到java虚拟机中，通过静态代码块的方式</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">   <span class="comment">//1.定义一个native的方法</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">native</span> String <span class="title">helloFromC</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">   <span class="keyword">static</span>&#123;</div><div class="line">		 <span class="comment">//5.把要调用的c代码 给加载到java虚拟机里面</span></div><div class="line">		System. loadLibrary(<span class="string">"Hello"</span>);<span class="comment">//注意写的是Hello不要加后缀</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>调用c代码            </p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">click</span><span class="params">(View view)</span></span>&#123;</div><div class="line">  <span class="comment">//调用c代码</span></div><div class="line">  Toast.makeText(<span class="keyword">this</span>, helloFromC(), <span class="number">1</span>).show();</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>利用jdk的工具javah动态生成c方法名<br> 在上面的调用c中的方法的时候，在c中区实现这个方法的时候的方法名字写起来很复杂，而且容易出去，在java在jdk中提供了一个工具javah，<br> 我们只要在windows的dos窗口cmd到classes目录下去执行javah 包名.类名就能够由class文件动态的生成一个c的h文件，在这个h文件中有该class文件中的native方法的名字<br> 我们只要拷贝这个h文件到自己工程的jni目录中，然后在c文件中引入这个h文件，并拷贝这个h文件中的方法去实现就可以了      </p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">   #include &lt;stdio.h&gt;//这个&lt;&gt;是引入工具的h文件        </div><div class="line">   #include "cn_itcast_ndk2_DemoActivity.h" //对于自己工程中的h文件用""来引入或者引入#include &lt;jni.h&gt;也可以      </div><div class="line"></div><div class="line">JNIEXPORT jstring JNICALL Java_cn_itcast_ndk2_DemoActivity_hello_1_1_1from_1_1_1c //拷贝h文件中生成的方法名</div><div class="line">  (JNIEnv * env, jobject obj)&#123; </div><div class="line">	  return (*env)-&gt;NewStringUTF(env,"hello_from_c 2!" );</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> 然后就和上面的步骤一样了</p>
<p> 注意上面的这个javah的用法师在jdk1.6中用的，如果在jdk1.7中就不能这样用了<br> 对于jdk1.7在使用javah的工具的时候就不能够直接进入到classes目录下直接运行命令了，<br> 而是要将sdk中的platforms下的android版本中的android.jar这个路径加载到classPath的环境变量中(麻烦)，或者是直接进入到src目录下用javah包名.类名(简单常用)</p>
</li>
<li><p>如何在c中向logcat中打印日志<br> 如果想像logcat打印日志就要用到谷歌在ndk中提供的一个工具log.h的头文件<br> 步骤：</p>
<ol>
<li><p>在c文件的头上面导入文件，加入下面的这四行代码      </p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;android/log.h&gt; //导入log.h</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LOG_TAG <span class="meta-string">"clog"</span>  <span class="comment">//指定打印到logcat的Tag</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LOGD(...) __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__) <span class="comment">//对后面的这个打印日志的方法起一个别名是LOGD</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LOGI(...) __android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__)</span></div></pre></td></tr></table></figure>
</li>
<li><p>在android.mk中加载文件            </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">LOCAL_PATH := $(call my-dir)</div><div class="line">include $(CLEAR_VARS)</div><div class="line"></div><div class="line">LOCAL_MODULE    := Hello</div><div class="line">LOCAL_SRC_FILES := Hello.c</div><div class="line">LOCAL_LDLIBS += -llog   //新增加这一句，作用是 #把c语言调用的log函数对应的函数库加入到编译的运行时里面 #liblog.so，如果还要加载其他的就在后面继续 -lXXX</div><div class="line">include $(BUILD_SHARED_LIBRARY)</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<pre><code>3. 在c的代码中直接使用LOGD或者LOGI就能向logcat中输入打印信息
    <figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function">JNIEXPORT jint JNICALL <span class="title">Java_cn_itcast_ndk3_DataProvider_add</span></span></div><div class="line"><span class="params">(JNIEnv * env, jobject obj, jint x, jint y)</span>&#123;</div><div class="line">	LOGI( <span class="string">"x=%d"</span>,x);</div><div class="line">	LOGD( <span class="string">"y=%d"</span>,y);</div><div class="line">	<span class="keyword">int</span> result = x+y;</div><div class="line">	LOGD( <span class="string">"result=%d"</span>,result);</div><div class="line">	<span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</code></pre><ol>
<li><p>如何将java的数据传递给c语言<br> 就是java在方法中传值，然后c通过参数得到数据处理后返回和上面的一样</p>
</li>
<li><p>将c中的字符串数组转成java中的string用到jni.h中的一个方法<br><code>jstring (*NewStringUTF)(JNIEnv*, const char*);</code></p>
</li>
<li><p>C中调用java<br>c语言回调java的场景.</p>
<ol>
<li>如果有一个操作已经有方便的java实现,才用c调用java可以避免重复发明一个轮子.</li>
<li>想在c代码里面通知界面更新ui.     </li>
</ol>
<p>C调用java的 思想类似于java中的反射，我们在c中就是通过反射的c实现来找到java中的这个方法，<br>在getMethodID的第二个参数是一个方法的签名，这里我们可以通过jdk提供的一个工具javap，来到classes目录下，<br>然后用 javap -s 类名.方法名  来得到一个方法的签名，这样就能列出来所有方法的签名</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * env JNIEnv* java虚拟机环境的指针.</div><div class="line"> *</div><div class="line"> *jobject obj ,哪个对象调用的这个native的方法 , obj就代表的是哪个对象</div><div class="line"> */</div><div class="line"><span class="function">JNIEXPORT <span class="keyword">void</span> JNICALL <span class="title">Java_cn_itcast_ndk4_DataProvider_callmethod1</span></span></div><div class="line">  <span class="params">(JNIEnv * env, jobject obj)</span>&#123;</div><div class="line">	   <span class="comment">//思考 java中的反射</span></div><div class="line">	   <span class="comment">//1.找到某一个类的字节码</span></div><div class="line">	   <span class="comment">//   jclass      (*FindClass)(JNIEnv*, const char*);</span></div><div class="line">	  jclass jclazz = (*env)-&gt;FindClass(env,<span class="string">"cn/itcast/ndk4/DataProvider"</span> );</div><div class="line">	   <span class="keyword">if</span>(jclazz==<span class="number">0</span>)&#123;</div><div class="line">			LOGI( <span class="string">"LOAD CLAZZ ERROR"</span>);</div><div class="line">	  &#125; <span class="keyword">else</span>&#123;</div><div class="line">			LOGI( <span class="string">"LOAD CLAZZ success"</span> );</div><div class="line">	  &#125;</div><div class="line">	   <span class="comment">//2.找到类的字节码里面的方法.</span></div><div class="line">	   <span class="comment">// jmethodID   (*GetMethodID)(JNIEnv*, jclass, const char*, const char*);</span></div><div class="line"></div><div class="line">	  jmethodID  methodid = (*env)-&gt;GetMethodID(env,jclazz,<span class="string">"helloFromJava"</span>, <span class="string">"()V"</span>); <span class="comment">//最后一个参数是方法的签名</span></div><div class="line">	   <span class="keyword">if</span>(methodid==<span class="number">0</span>)&#123;</div><div class="line">			LOGI( <span class="string">"LOAD methodid ERROR"</span> );</div><div class="line">	  &#125; <span class="keyword">else</span>&#123;</div><div class="line">			LOGI( <span class="string">"LOAD methodid success"</span> );</div><div class="line">	  &#125;</div><div class="line"></div><div class="line">	   <span class="comment">//3.调用方法</span></div><div class="line">	   <span class="comment">//void        (*CallVoidMethod)(JNIEnv*, jobject, jmethodID, ...);</span></div><div class="line">	  (*env)-&gt;CallVoidMethod(env,obj,methodid);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>小知识      </p>
<ol>
<li><p>Android的API提供了SystemClock类，这个类中有一个方法<br> public static void sleep(long ms)，这个方法内部对Thread.sleep进行了封装对异常进行了try catch，平时用Thread.sleep还要自己进行捕捉，<br> 所以可以使用SystemColock.sleep()还简单</p>
</li>
<li><p>Java中通过java虚拟机来调用c的代码，首先将c的库加载到虚拟机中，但是其实这个c代码并不是运行在java虚拟机中的，而是运行在虚拟机之外的一个单独的进程中</p>
</li>
</ol>
</li>
<li><p>自定义一个View控件(用于表示锅炉的压力大小)       </p>
<ol>
<li>写一个类继承View(View是Android中所有能显示到界面上的东西全的父类)</li>
<li>重写onDraw()方法，这个方法是该控件被画到桌面上的时候调用的方法。</li>
</ol>
</li>
<li><p>C++与C代码的不同<br>C++文件的后缀是cpp<br>C++与C的不同就是C++提供了模板、继承、抽象等     </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//将java字符串转成C++字符串的工具方法</span></div><div class="line"><span class="function"><span class="keyword">char</span>*   <span class="title">Jstring2CStr</span><span class="params">(JNIEnv*   env,   jstring   jstr)</span></span></div><div class="line">&#123;</div><div class="line">	 <span class="keyword">char</span>*   rtn   =   <span class="literal">NULL</span>;</div><div class="line">	 jclass   clsstring   =   (env)-&gt;FindClass(<span class="string">"java/lang/String"</span>);</div><div class="line">	 jstring   strencode   =   (env)-&gt;NewStringUTF(<span class="string">"GB2312"</span>);</div><div class="line">	 jmethodID   mid   =   (env)-&gt;GetMethodID(clsstring,   <span class="string">"getBytes"</span>,   <span class="string">"(Ljava/lang/String;)[B"</span>);</div><div class="line">	 jbyteArray   barr=   (jbyteArray)(env)-&gt;CallObjectMethod(jstr,mid,strencode); <span class="comment">// String .getByte("GB2312");</span></div><div class="line">	 jsize   alen   =   (env)-&gt;GetArrayLength(barr);</div><div class="line">	 jbyte*   ba   =   (env)-&gt;GetByteArrayElements(barr,JNI_FALSE);</div><div class="line">	 <span class="keyword">if</span>(alen   &gt;   <span class="number">0</span>)</div><div class="line">	 &#123;</div><div class="line">	  rtn   =   (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(alen+<span class="number">1</span>);         <span class="comment">//"\0"</span></div><div class="line">	  <span class="built_in">memcpy</span>(rtn,ba,alen);</div><div class="line">	  rtn[alen]=<span class="number">0</span>;</div><div class="line">	 &#125;</div><div class="line">	 (env)-&gt;ReleaseByteArrayElements(barr,ba,<span class="number">0</span>);  <span class="comment">//</span></div><div class="line">	 <span class="keyword">return</span> rtn;</div><div class="line">&#125;</div><div class="line"><span class="function">JNIEXPORT jstring JNICALL <span class="title">Java_cn_itcast_cpp_DemoActivity_HelloFromC</span></span></div><div class="line">  <span class="params">(JNIEnv * env, jobject obj)</span>&#123;</div><div class="line">	<span class="comment">//C代码</span></div><div class="line">	<span class="comment">//return (*env)-&gt;NewStringUTF(env,"haha from c"); 在C中env代表的是C中结构体的指针的指针</span></div><div class="line">	<span class="comment">//c++代码</span></div><div class="line">	<span class="keyword">return</span> env-&gt;NewStringUTF(<span class="string">"haha from cpp"</span>);<span class="comment">//在C++中env代表的是C++中结构体的指针</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>对于JNI中的中文乱码问题<br>老版本的ndk r7之前 r6 r5 r5 crystal r4(编译的时候 语言集 是iso-8859-1)<br>在使用老版本ndk 编译出来的so文件的时候 要手动的进行转码.先用iso8859-1解码，再用utf-8编码，在r7(包括)之后的我们只要将C文件的格式改为UTF-8就可以了</p>
</li>
<li><p>文件的格式及格式转换<br>格式转换的原理：                </p>
<ol>
<li>读取一段数据到内存     </li>
<li>分析这一段数据</li>
<li>修改里面的内容</li>
<li>写到文件里面</li>
</ol>
<p>文件的格式：<br>文件的存储方式是二进制0101这样<br>那么怎么设别文件的类型呢？     </p>
<ol>
<li>根据扩展名</li>
<li>根据文件的头信息(头信息才是一个文件的真正的格式)，有些文件我们修改了扩展名也可以打开，<br> 这是因为打开文件的程序区扫描了文件的头信息，并用头信息中的类型来打开了这个文件</li>
</ol>
</li>
<li><p>C中读取数据    </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line">main()&#123;</div><div class="line"><span class="comment">//用  法: FILE *fopen(char *filename, char *type); //第二个参数是打开的方式 rt就是读文件， rb就是读二进制</span></div><div class="line">   FILE*    fp = fopen(<span class="string">"1.txt"</span>,<span class="string">"rt"</span>);</div><div class="line"><span class="comment">//用  法: int fread (void *ptr, int size, int nitems, FILE *stream); </span></div><div class="line">						<span class="comment">//ptr要读的数据 放在哪一块内存空间里面.</span></div><div class="line">						<span class="comment">//size 一次读的数据的长度.</span></div><div class="line">						<span class="comment">//nitems 读多少次</span></div><div class="line">						<span class="comment">//stream 从哪个文件里面 读</span></div><div class="line"> </div><div class="line">  <span class="keyword">char</span>* buffer = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>)*<span class="number">12</span>);</div><div class="line"> <span class="keyword">int</span> len=   fread(buffer,<span class="keyword">sizeof</span>(<span class="keyword">char</span>),<span class="number">12</span>,fp);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"读了%d个char\n"</span>,len);</div><div class="line">   <span class="built_in">printf</span>(<span class="string">"str=%s\n"</span>,buffer);</div><div class="line">   fclose(fp);  <span class="comment">//关闭掉流</span></div><div class="line"> </div><div class="line">  system(<span class="string">"pause"</span>);     </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>C中写文件</p>
<pre><code class="c"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span>
main(){
<span class="comment">//用  法: FILE *fopen(char *filename, char *type);</span>
   FILE*    fp = fopen(<span class="string">"1.txt"</span>,<span class="string">"wt"</span>);
<span class="comment">//用  法: int fwrite(void *ptr, int size, int nitems, FILE *stream); </span>
                        <span class="comment">//ptr要向文件写的是哪一块内存里面的数据</span>
                        <span class="comment">//size 一次写的数据的长度.</span>
                        <span class="comment">//nitems 写多少次</span>
                        <span class="comment">//stream 写到哪个文件里面</span>
   <span class="keyword">char</span>* str=<span class="string">"hello from c"</span>;
   <span class="keyword">int</span> len = fwrite(str,<span class="keyword">sizeof</span>(<span class="keyword">char</span>),<span class="number">12</span>,fp);
   <span class="built_in">printf</span>(<span class="string">"写了%d个char\n"</span>,len);
   fclose(fp);  <span class="comment">//关闭掉流</span>

   system(<span class="string">"pause"</span>);     
}
</code></pre>
</li>
<li><p>C语言文件操作模式<br>“rt” 只读打开一个文本文件，只允许读数据<br>“wt” 只写打开或建立一个文本文件，只允许写数据<br>“at” 追加打开一个文本文件，并在文件末尾写数据<br>“rb” 只读打开一个二进制文件，只允许读数据<br>“wb” 只写打开或建立一个二进制文件，只允许写数据<br>“ab” 追加打开一个二进制文件，并在文件末尾写数据<br>“rt+” 读写打开一个文本文件，允许读和写<br>“wt+” 读写打开或建立一个文本文件，允许读写<br>“at+” 读写打开一个文本文件，允许读，或在文件末追加数据<br>“rb+” 读写打开一个二进制文件，允许读和写<br>“wb+” 读写打开或建立一个二进制文件，允许读和写<br>“ab+” 读写打开一个二进制文件，允许读，或在文件末追加数据        </p>
<p>对于文件使用方式有以下几点说明：<br>文件使用方式由r,w,a,t,b，+六个字符拼成，各字符的含义是： </p>
<p>r(read): 读<br>w(write): 写<br>a(append): 追加<br>t(text): 文本文件，可省略不写<br>b(banary): 二进制文件        </p>
</li>
</ol>
<hr>
    </div>

    <div class="post-footer">   
        <div>
            
                转载声明: 商业转载请联系作者获得授权,非商业转载请注明出处 © Snippet
            
        </div>
        <div>
            
                版权声明: <a href="https://creativecommons.org/licenses/by-nc-nd/3.0/" target="_blank">
知识共享署名-非商业性使用-禁止演绎 3.0 未本地化版本许可协议（CC BY-NC-ND 3.0）
</a>
            
        </div>  
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2016/02/22/Android从入门到精通第十课/" class="pre-post btn btn-default"><i class="fa fa-angle-left fa-fw"></i>上一篇</a>
    
    
        <a href="/2016/02/19/Android从入门到精通第八课/" class="next-post btn btn-default">下一篇<i class="fa fa-angle-right fa-fw"></i></a>
    
</div>


    <div id="comments">
        <div id="uyan_frame"></div>
    <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2120654"></script>
    </div>
                </main>
                <aside class="col-md-4 sidebar">
        
        <div class="widget notification">
        <h3 class="title">网站公告</h3>
        <div>
            <p>主题Snippet v1.1.0版本即将上线，敬请期待~ <br>
主题下载：<a href="https://github.com/shenliyang/hexo-theme-snippet" title="fork me" target="_blank">Snippet主题</a> <br>
<hr>前端工程师一枚，专注于前端Node、React和移动端Android和Ios开发，欢迎骚扰。
<br>联系方式：qq群:278792776（移动群）、515980159（React群）、188716429（猎头hr群）
</p>
        </div>
    </div>
        
        <div class="widget">
        <h3 class="title">分类</h3>
        <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/"><i class="fa" aria-hidden="true">Android</i></a><span class="category-list-count">36</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/系统/"><i class="fa" aria-hidden="true">系统</i></a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Google/"><i class="fa" aria-hidden="true">Google</i></a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Google/VR/"><i class="fa" aria-hidden="true">VR</i></a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/"><i class="fa" aria-hidden="true">Java</i></a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React-Native/"><i class="fa" aria-hidden="true">React Native</i></a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/"><i class="fa" aria-hidden="true">Spring</i></a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/"><i class="fa" aria-hidden="true">android</i></a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/"><i class="fa" aria-hidden="true">iOS</i></a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ios/"><i class="fa" aria-hidden="true">ios</i></a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/"><i class="fa" aria-hidden="true">前端</i></a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/"><i class="fa" aria-hidden="true">后端</i></a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/小程序/"><i class="fa" aria-hidden="true">小程序</i></a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术人生/"><i class="fa" aria-hidden="true">技术人生</i></a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/"><i class="fa" aria-hidden="true">机器学习</i></a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂谈/"><i class="fa" aria-hidden="true">杂谈</i></a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/"><i class="fa" aria-hidden="true">编程语言</i></a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/"><i class="fa" aria-hidden="true">设计模式</i></a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/资料库/"><i class="fa" aria-hidden="true">资料库</i></a><span class="category-list-count">1</span></li></ul>
    </div>
        
        <div class="widget">
      <h3 class="title">归档</h3>
        <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/"><i class="fa" aria-hidden="true">十月 2017</i></a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/"><i class="fa" aria-hidden="true">九月 2017</i></a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/"><i class="fa" aria-hidden="true">八月 2017</i></a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/"><i class="fa" aria-hidden="true">七月 2017</i></a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/"><i class="fa" aria-hidden="true">六月 2017</i></a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/"><i class="fa" aria-hidden="true">五月 2017</i></a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/"><i class="fa" aria-hidden="true">四月 2017</i></a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/"><i class="fa" aria-hidden="true">三月 2017</i></a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/"><i class="fa" aria-hidden="true">二月 2017</i></a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/"><i class="fa" aria-hidden="true">一月 2017</i></a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/"><i class="fa" aria-hidden="true">十二月 2016</i></a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/"><i class="fa" aria-hidden="true">十一月 2016</i></a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/"><i class="fa" aria-hidden="true">十月 2016</i></a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/"><i class="fa" aria-hidden="true">九月 2016</i></a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/"><i class="fa" aria-hidden="true">八月 2016</i></a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/"><i class="fa" aria-hidden="true">七月 2016</i></a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/"><i class="fa" aria-hidden="true">六月 2016</i></a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/"><i class="fa" aria-hidden="true">五月 2016</i></a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/"><i class="fa" aria-hidden="true">四月 2016</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/"><i class="fa" aria-hidden="true">三月 2016</i></a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/"><i class="fa" aria-hidden="true">二月 2016</i></a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/"><i class="fa" aria-hidden="true">六月 2015</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/"><i class="fa" aria-hidden="true">五月 2015</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/"><i class="fa" aria-hidden="true">四月 2015</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/"><i class="fa" aria-hidden="true">三月 2015</i></a><span class="archive-list-count">2</span></li></ul>
    </div>
        
        <div class="widget">
    <h3 class="title">标签云</h3>
    <div class="content tag-cloud">
      
        <a href="/tags/ios/" style="font-size: 1em">ios</a> <a href="/tags/Android/" style="font-size: 1em">Android</a> <a href="/tags/深入系统/" style="font-size: 1em">深入系统</a> <a href="/tags/系统服务/" style="font-size: 1em">系统服务</a> <a href="/tags/android/" style="font-size: 1em">android</a> <a href="/tags/混淆打包/" style="font-size: 1em">混淆打包</a> <a href="/tags/Angular2/" style="font-size: 1em">Angular2</a> <a href="/tags/前端开发/" style="font-size: 1em">前端开发</a> <a href="/tags/硬件/" style="font-size: 1em">硬件</a> <a href="/tags/前端/" style="font-size: 1em">前端</a> <a href="/tags/React-Native/" style="font-size: 1em">React Native</a> <a href="/tags/FlexBox布局/" style="font-size: 1em">FlexBox布局</a> <a href="/tags/Google/" style="font-size: 1em">Google</a> <a href="/tags/VR/" style="font-size: 1em">VR</a> <a href="/tags/Java/" style="font-size: 1em">Java</a> <a href="/tags/垃圾回收/" style="font-size: 1em">垃圾回收</a> <a href="/tags/编程语言/" style="font-size: 1em">编程语言</a> <a href="/tags/Node/" style="font-size: 1em">Node</a> <a href="/tags/OpenGL/" style="font-size: 1em">OpenGL</a> <a href="/tags/Promise/" style="font-size: 1em">Promise</a> <a href="/tags/eact-Native/" style="font-size: 1em">eact Native</a> <a href="/tags/打包/" style="font-size: 1em">打包</a> <a href="/tags/调试/" style="font-size: 1em">调试</a> <a href="/tags/原生/" style="font-size: 1em">原生</a> <a href="/tags/后端/" style="font-size: 1em">后端</a> <a href="/tags/Spring/" style="font-size: 1em">Spring</a> <a href="/tags/入门/" style="font-size: 1em">入门</a> <a href="/tags/新特性/" style="font-size: 1em">新特性</a> <a href="/tags/swift/" style="font-size: 1em">swift</a> <a href="/tags/Swift/" style="font-size: 1em">Swift</a> <a href="/tags/AR/" style="font-size: 1em">AR</a> <a href="/tags/知识库/" style="font-size: 1em">知识库</a> <a href="/tags/Xcode/" style="font-size: 1em">Xcode</a> <a href="/tags/webpack/" style="font-size: 1em">webpack</a> <a href="/tags/gulp/" style="font-size: 1em">gulp</a> <a href="/tags/https/" style="font-size: 1em">https</a> <a href="/tags/iOS/" style="font-size: 1em">iOS</a> <a href="/tags/gif/" style="font-size: 1em">gif</a> <a href="/tags/mac/" style="font-size: 1em">mac</a> <a href="/tags/环境/" style="font-size: 1em">环境</a> <a href="/tags/原理/" style="font-size: 1em">原理</a> <a href="/tags/react/" style="font-size: 1em">react</a> <a href="/tags/杂谈/" style="font-size: 1em">杂谈</a> <a href="/tags/个人博客/" style="font-size: 1em">个人博客</a> <a href="/tags/流量/" style="font-size: 1em">流量</a> <a href="/tags/小程序/" style="font-size: 1em">小程序</a> <a href="/tags/微信/" style="font-size: 1em">微信</a> <a href="/tags/全栈/" style="font-size: 1em">全栈</a> <a href="/tags/搭建网站/" style="font-size: 1em">搭建网站</a> <a href="/tags/机器学习/" style="font-size: 1em">机器学习</a> <a href="/tags/算法/" style="font-size: 1em">算法</a> <a href="/tags/深入理解/" style="font-size: 1em">深入理解</a> <a href="/tags/内存分配/" style="font-size: 1em">内存分配</a> <a href="/tags/设计模式/" style="font-size: 1em">设计模式</a>
    </div>
  </div>
        
        <div class="widget">
        <h3 class="title">友链</h3>
        <div class="content friends-link">
        
            <a href="http://blog.csdn.net/xiangzhihong8/" class="fa" target="_blank">作者博客</a>
        
            <a href="https://yq.aliyun.com/u/xiangzhihong" class="fa" target="_blank">阿里云博客</a>
        
        </div>
    </div>
        
    </aside>
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017 
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>
<script src="/assets/highlight.pack.js?rev=@@hash"></script>
  <script>
    hljs.initHighlightingOnLoad(); //初始化代码高亮 
  </script>

<script src="/js/app.js?rev=@@hash"></script>
</body>
