<!DOCTYPE HTML>
<html>
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no">
    <link rel="dns-prefetch" href="//t11.baidu.com">
    <!--SEO-->



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>Android入门之动画 | 向志洪</title>


    <link rel="alternate" href="/atom.xml" title="向志洪" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css?rev=9.12.0">


<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css?rev=3.3.4">
<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">
    <div class="hide">
    <script src="https://s4.cnzz.com/z_stat.php?id=1261768793&web_id=1262140174" language="JavaScript"></script>
    </div>
    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?13764659765";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
	
	<script src="https://cdn1.lncld.net/static/js/av-min-1.2.1.js"></script>
    <script>AV.initialize("aj42pgqDHRSVhMknqDb3JMeg-gzGzoHsz", "qbRaoHOP9NMWPOow8PandkH3");</script>
</head></html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
    <header class="main-header">
    <div class="main-header-box">
        <a class="branding" href="/" title="">
            <img src="/img/header_logo.png" alt="Snippet 博客主题">
        </a>
        <h2 class="text-hide">Snippet主题</h2>
        <img src="/img/header_logo.png" alt="Snippet 博客主题" class="hide">
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="fa fa-bars"></i>
                    </span>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class=""><a href="/">首页</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/前端/">前端</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/后端/">后端</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/Java/">Java</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/Python/">Python</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/Android/">Android</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/iOS/">iOS</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/React Native/">React Native</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/小程序/">小程序</a></li>
                        
                            <li role="presentation" class=""><a href="/categories/杂谈/">杂谈</a></li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Android入门之动画">
            
            Android入门之动画
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <span>Android</span>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            Android
            
        </span>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">2016/02/11</span>
    </span>
</div>
            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>667</strong>天之前发表，文中内容可能已经过时。
            </p>
            
    </div>
    
    <div class="post-body">
        <h1 id="Android动画"><a href="#Android动画" class="headerlink" title="Android动画"></a>Android动画</h1><ol>
<li><p>AlphaAnimation</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">RelativeLayout rl_splash = (RelativeLayout) findViewById(R.id.rl_splash);</div><div class="line"><span class="comment">//播放动画效果</span></div><div class="line">AlphaAnimation animation = <span class="keyword">new</span> AlphaAnimation(<span class="number">1.0f</span>, <span class="number">0.0f</span>);</div><div class="line"><span class="comment">//设置Alpha动画的持续时间</span></div><div class="line">animation.setDuration(<span class="number">2000</span>);</div><div class="line"><span class="comment">//播放Alpha动画</span></div><div class="line">rl_splash.setAnimation(animation);</div></pre></td></tr></table></figure>
</li>
<li><p>RotateAnimation</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//相对于自身的哪个位置旋转，这里是相对于自身的右下角</span></div><div class="line">RotateAnimation ra = <span class="keyword">new</span> RotateAnimation(<span class="number">0</span>, <span class="number">360</span>,  <span class="comment">//从哪旋转，旋转多少度</span></div><div class="line">        Animation.RELATIVE_TO_SELF, <span class="number">1.0f</span>, Animation.RELATIVE_TO_SELF,</div><div class="line">        <span class="number">1.0f</span>);</div><div class="line">ra.setDuration(<span class="number">800</span>);</div><div class="line">ra.setRepeatCount(Animation.INFINITE);</div><div class="line">ra.setRepeatMode(Animation.RESTART);</div><div class="line">iv_scan.startAnimation(ra);</div></pre></td></tr></table></figure>
</li>
<li><p>ScaleAnimation(缩放动画)    </p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ScaleAnimation(<span class="keyword">float</span> fromX, <span class="keyword">float</span> toX, <span class="keyword">float</span> fromY, <span class="keyword">float</span> toY) </div><div class="line">Constructor to use when building a ScaleAnimation from code</div></pre></td></tr></table></figure>
</li>
<li><p>TranslateAnimation(位移动画)     </p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">TranslateAnimation(<span class="keyword">int</span> fromXType, <span class="keyword">float</span> fromXValue, <span class="keyword">int</span> toXType, <span class="keyword">float</span> toXValue, <span class="keyword">int</span> fromYType, <span class="keyword">float</span> fromYValue, <span class="keyword">int</span> toYType, <span class="keyword">float</span> toYValue) </div><div class="line">Constructor to use when building a TranslateAnimation from code</div></pre></td></tr></table></figure>
</li>
<li><p>AnimationSet (多组动画)</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">ScaleAnimation sa = <span class="keyword">new</span> ScaleAnimation(<span class="number">0.2f</span>, <span class="number">1.0f</span>, <span class="number">0.4f</span>,<span class="number">1.0f</span>);<span class="comment">//缩放的动画效果,1.0f就代表窗体的总宽或者高</span></div><div class="line">sa.setDuration(<span class="number">400</span>);</div><div class="line">TranslateAnimation ta = <span class="keyword">new</span> TranslateAnimation(<span class="comment">//位移动的动画效果</span></div><div class="line">          Animation.RELATIVE_TO_SELF, <span class="number">0</span>,<span class="comment">//指定这个位置是相对于谁</span></div><div class="line">          Animation.RELATIVE_TO_SELF, <span class="number">0.1f</span>,</div><div class="line">          Animation.RELATIVE_TO_SELF, <span class="number">0</span>,</div><div class="line">          Animation.RELATIVE_TO_SELF, <span class="number">0</span>);</div><div class="line">ta.setDuration(<span class="number">300</span>);</div><div class="line">AnimationSet set = <span class="keyword">new</span> AnimationSet(<span class="keyword">false</span>);<span class="comment">//如果想播放多种动画的组合，这里就要用到了AnimationSet</span></div><div class="line">set.addAnimation(sa);</div><div class="line">set.addAnimation(ta);</div><div class="line">contentView.startAnimation(set); <span class="comment">// 播放一组动画.</span></div></pre></td></tr></table></figure>
</li>
<li><p>Frame动画<br> 在<code>SDK</code>中提到，不要在<code>onCreate</code>中调用<code>start</code>方法开始播放<code>Frame</code>动画，因为<code>AnimationDrawable</code>还没有完全跟<code>Window</code>相关联，如果想要界面显示时就开始播放帧动画的话，可以在<code>onWindowFocusChanged()</code>中调用<code>start()</code>。</p>
<ul>
<li><p>在<code>drawable</code>目录下新建一个<code>xml</code>文件，内容如下:</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">animation-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:oneshot</span>=<span class="string">"true"</span> &gt; //onshot是指定是否循环播放</div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">        <span class="attr">android:drawable</span>=<span class="string">"@drawable/desktop_rocket_launch_1"</span>  //<span class="attr">Frame</span>动画的图片</div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"50"</span>/&gt; //播放这个图片持续的时间</div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">        <span class="attr">android:drawable</span>=<span class="string">"@drawable/desktop_rocket_launch_2"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"100"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">animation-list</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>播放Frame动画</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">AnimationDrawable rocketAnimation;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">      <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">      setContentView(R.layout.main);</div><div class="line">      ImageView rocketImage = (ImageView) findViewById(R.id.iv);</div><div class="line">      rocketImage.setBackgroundResource(R.drawable.animlist); <span class="comment">//将上边建的Frame动画的xml文件通过背景资源设置给图片</span></div><div class="line">      rocketAnimation = (AnimationDrawable) rocketImage.getBackground();  <span class="comment">//获取到图片的背景资源</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">      <span class="keyword">if</span> (!rocketAnimation.isRunning()) &#123;</div><div class="line">           rocketAnimation.start();  <span class="comment">//播放</span></div><div class="line">      &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>保持动画播放完成后的状态<code>animation.setFillAfter(true);</code>   </p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Interpolator <span class="comment">//定义了动画的变化速度，可以实现匀速、正加速、负加速、无规则变加速度</span></div><div class="line">AccelerateDecelerateInterpolator<span class="comment">//先加速后减速。</span></div><div class="line">AccelerateInterpolator<span class="comment">//逐渐加速。    </span></div><div class="line">LinearInterpolator<span class="comment">//平稳不变的   </span></div><div class="line">DecelerateInterpolator<span class="comment">//逐渐减速</span></div><div class="line">CycleInterpolator<span class="comment">//曲线运动特效，要传递float型的参数。     </span></div><div class="line">animation.setInterpolator(<span class="keyword">new</span> LinearInterpolator());<span class="comment">//指定动画的运行效果</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>上面所讲的动画都是<code>Android 3.0</code>之前的动画，也就是我们最先熟悉的<code>Frame</code>动画和<code>Tween</code>动画。</p>
<p>从<code>3.0</code>开始又引入了一个新的动画叫做<code>Property</code>动画。并且针对这三种动画的动画模式分为:</p>
<ul>
<li><code>Property Animation</code> : 属性动画,从<code>Android 3.0</code>开始引进，更改的是对象的实际属性，而且属性动画不止可以应用于<code>View</code>还可以应用于任何对象。</li>
<li><code>View Animation</code> : 指之前的<code>Tween</code>动画，<code>alpha scale translate rotate</code>等。为什么叫做<code>View Animation</code>呢？因为它只能应用于<code>View</code>对象，而且只支持一部分属性，如支持缩放旋转而不支持背景颜色的变化。对于<code>View Animation</code>而言，它只改变了<code>View</code>对象绘制的位置，而没有改变<code>View</code>对象本身的属性，比如，有一个200<em>200大小的<code>Button</code>，你用<code>Tween</code>动画给放大到500</em>500但是它的有效点击区域还是200*200。</li>
<li><code>Drawable Animation</code> : 指之前的<code>Frame</code>动画。因为它是通过一帧帧的图片来播放的。</li>
</ul>
<h2 id="下面我们开始仔细讲解一下Property-Animation"><a href="#下面我们开始仔细讲解一下Property-Animation" class="headerlink" title="下面我们开始仔细讲解一下Property Animation"></a>下面我们开始仔细讲解一下<code>Property Animation</code></h2><p>官方文档中是这样这样介绍属性动画的:      </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">The property animation system is a robust framework that allows you to animate almost anything. You can define an animation to change any object property over time, regardless of whether it draws to the screen or not. A property animation changes a property&apos;s (a field in an object) value over a specified length of time. To animate something, you specify the object property that you want to animate, such as an object&apos;s position on the screen, how long you want to animate it for, and what values you want to animate between.</div></pre></td></tr></table></figure>
<p>一个强大的框架。    </p>
<p>在<code>Property Animation</code>中，可以对动画应用以下属性:   </p>
<ul>
<li><code>Duration</code>: 指定动画持续时间，默认时间是<code>300ms</code>      </li>
<li><code>TimeInterpolation</code>: 一些效果，如加速、加速等。</li>
<li><code>Repeat count and behavior</code>: 重复次数已经</li>
<li><code>Animation Set</code>: 动画合集。用来同时或者顺序播放多个动画。</li>
<li><code>Frame Refresh Delay</code>: 多长时间刷新一次，默认是<code>10ms</code>。</li>
</ul>
<p>###<code>ValueAnimator</code>    </p>
<p><code>ValueAnimator</code>包含<code>Property Animation</code>动画的所有核心功能，如动画时间，开始、结束属性值，相应时间属性值计算方法等。应用<code>Property Animation</code>有两个步聚：       </p>
<ul>
<li>计算属性值</li>
<li>根据属性值执行相应的动作，如改变对象的某一属性。</li>
</ul>
<p><code>ValuAnimiator</code>只完成了第一步工作，如果要完成第二步，需要实现<code>ValueAnimator.onUpdateListener</code>接口，这个接口只有一个函数<code>onAnimationUpdate()</code>，在这个函数中会传入<code>ValueAnimator</code>对象做为参数，通过这个<code>ValueAnimator</code>对象的<code>getAnimatedValue()</code>函数可以得到当前的属性值。</p>
<p>###<code>ObjectAnimator</code>   </p>
<p>继承自<code>ValueAnimator</code>，要指定一个对象及该对象的一个属性，当属性值计算完成时自动设置为该对象的相应属性，即完成了<code>Property Animation</code>的全部两步操作。实际应用中一般都会用<code>ObjectAnimator</code>来改变某一对象的某一属性，但用<code>ObjectAnimator</code>有一定的限制，要想使用<code>ObjectAnimator</code>，应该满足以下条件：</p>
<ul>
<li>对象应该有一个<code>setter</code>函数：<code>set&lt;PropertyName&gt;</code>（驼峰命名法）</li>
<li>如上面的例子中，像<code>ofFloat</code>之类的工场方法，第一个参数为对象名，第二个为属性名，后面的参数为可变参数，如果<code>values…</code>参数只设置了一个值的话，那么会假定为目的值，属性值的变化范围为当前值到目的值，为了获得当前值，该对象要有相应属性的<code>getter</code>方法：<code>get&lt;PropertyName&gt;</code></li>
<li>如果有<code>getter</code>方法，其应返回值类型应与相应的<code>setter</code>方法的参数类型一致。</li>
<li><code>object</code>的<code>setXxx</code>对属性<code>xxx</code>所做的改变必须能够通过某种方法反映出来，比如会带来<code>ui</code>的改变啥的（如果这条不满足，动画无效果）,例如我对<code>TextView</code>或者<code>Button</code>使用<code>width</code>的<code>ObjectAnimator</code>动画，就会发现无效，虽然他们都有<code>setWidth</code>和<code>getWidth</code>方法，但是<code>setWidth</code>方法的内部实现是改变<code>TextView</code>的最大宽度和最小宽度的，和<code>TextView</code>的宽度不是一个东西。所以动画就会无效。确切的说<code>TextView</code>的宽度对应的是<code>xml</code>中<code>android:layout_width</code>属性，而<code>TextView</code>还有另外一个属性:<code>android:width</code>，而<code>android:width</code> 属性对应的就是<code>TextView</code>中的<code>setWidth</code>方法。</li>
</ul>
<p>如果上述条件不满足，则不能用<code>ObjectAnimator</code>，应用<code>ValueAnimator</code>代替。<br>也就是说<code>ObjectAnimator</code>内部的工作机制是通过寻找特定属性的<code>get</code>和<code>set</code>方法，然后通过方法不断地对值进行改变，从而实现动画效果的。</p>
<p>###<code>AnimationSet</code></p>
<p><code>AnimationSet</code>提供了一个把多个动画组合成一个组合的机制，并可设置组中动画的时序关系，如同时播放，顺序播放等。</p>
<p>以下例子同时应用5个动画:   </p>
<ul>
<li>Plays bounceAnim.</li>
<li>Plays squashAnim1, squashAnim2, stretchAnim1, and stretchAnim2 at the same time.</li>
<li>Plays bounceBackAnim.</li>
<li>Plays fadeAnim.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">AnimatorSet bouncer = <span class="keyword">new</span> AnimatorSet();</div><div class="line">bouncer.play(bounceAnim).before(squashAnim1);</div><div class="line">bouncer.play(squashAnim1).with(squashAnim2);</div><div class="line">bouncer.play(squashAnim1).with(stretchAnim1);</div><div class="line">bouncer.play(squashAnim1).with(stretchAnim2);</div><div class="line">bouncer.play(bounceBackAnim).after(stretchAnim2);</div><div class="line">ValueAnimator fadeAnim = ObjectAnimator.ofFloat(newBall, <span class="string">"alpha"</span>, <span class="number">1f</span>, <span class="number">0f</span>);</div><div class="line">fadeAnim.setDuration(<span class="number">250</span>);</div><div class="line">AnimatorSet animatorSet = <span class="keyword">new</span> AnimatorSet();</div><div class="line">animatorSet.play(bouncer).before(fadeAnim);</div><div class="line">animatorSet.start();</div></pre></td></tr></table></figure>
<p>###TypeEvalutors</p>
<p>根据属性的开始、结束值与<code>TimeInterpolation</code>计算出的比例值来计算当前时间对应的属性值，<code>Android</code>提供了一下几种<code>evalutor</code>:    </p>
<ul>
<li><code>IntEvalutor</code>:<code>int</code>类型的属性值</li>
<li><code>FloatEvaluator</code>:</li>
<li><code>ArgbEvaluator</code>: 属性的值类型为十六进制颜色值；</li>
<li><code>TypeEvaluator</code>: 一个接口，可以通过实现该接口自定义Evaluator。<br>自定义<code>TypeEvaluator</code>也很简单，只需要实现一个方法，如<code>FloatEvalutor</code>的定义:     <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FloatEvaluator</span> <span class="keyword">implements</span> <span class="title">TypeEvaluator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">evaluate</span><span class="params">(<span class="keyword">float</span> fraction, Object startValue, Object endValue)</span> </span>&#123;</div><div class="line">        <span class="keyword">float</span> startFloat = ((Number) startValue).floatValue();</div><div class="line">        <span class="keyword">return</span> startFloat + fraction * (((Number) endValue).floatValue() - startFloat);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>evaluate()</code>方法当中传入了三个参数，第一个参数<code>fraction</code>非常重要，这个参数用于表示动画的完成度的，我们应该根据它来计算当前动画的值应该是多少，第二第三个参数分别表示动画的初始值和结束值。那么上述代码的逻辑就比较清晰了，用结束值减去初始值，算出它们之间的差值，然后乘以<code>fraction</code>这个系数，再加上初始值，那么就得到当前动画的值了。</p>
<p>###<code>TimeInterplator</code><br>Time interplator定义了属性值变化的方式，如线性均匀改变，开始慢然后逐渐快等。在Property Animation中是TimeInterplator，在View Animation中是Interplator，这两个是一样的，在3.0之前只有Interplator，3.0之后实现代码转移至了TimeInterplator。Interplator继承自TimeInterplator，内部没有任何其他代码。</p>
<ul>
<li>AccelerateInterpolator　　　　　     加速，开始时慢中间加速</li>
<li>DecelerateInterpolator　　　 　　   减速，开始时快然后减速</li>
<li>AccelerateDecelerateInterolator　   先加速后减速，开始结束时慢，中间加速</li>
<li>AnticipateInterpolator　　　　　　  反向 ，先向相反方向改变一段再加速播放</li>
<li>AnticipateOvershootInterpolator　   反向加回弹，先向相反方向改变，再加速播放，会超出目的值然后缓慢移动至目的值</li>
<li>BounceInterpolator　　　　　　　  跳跃，快到目的值时值会跳跃，如目的值100，后面的值可能依次为85，77，70，80，90，100</li>
<li>CycleIinterpolator　　　　　　　　 循环，动画循环一定次数，值的改变为一正弦函数：Math.sin(2 <em> mCycles </em> Math.PI * input)</li>
<li>LinearInterpolator　　　　　　　　 线性，线性均匀改变</li>
<li>OvershottInterpolator　　　　　　  回弹，最后超出目的值然后缓慢改变到目的值</li>
<li>TimeInterpolator　　　　　　　　   一个接口，允许你自定义interpolator，以上几个都是实现了这个接口</li>
</ul>
<p>###<code>PropertyValuesHolder</code></p>
<p>如果要实现一个对象不同属性的动画效果，除了<code>Set</code>，我们还可以利用<code>PropertyValuesHolder</code>和<code>ViewPropertyAnimator</code>对象来实现，具体做法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">PropertyValuesHolder pvhX = PropertyValuesHolder.ofFloat(&quot;x&quot;, 50f);</div><div class="line">PropertyValuesHolder pvhY = PropertyValuesHolder.ofFloat(&quot;y&quot;, 100f);</div><div class="line">ObjectAnimator.ofPropertyValuesHolder(myView, pvhX, pvyY).start();</div></pre></td></tr></table></figure></p>
<p>###<code>ViewPropertyAnimator</code></p>
<p>`* </p><p>This class is not constructed by the caller, but rather by the View whose properties</p>
<ul>
<li>it will animate. Calls to {@link android.view.View#animate()} will return a reference</li>
<li>to the appropriate ViewPropertyAnimator object for that View.`</li>
</ul>
<p>如果需要对一个View的多个属性进行动画可以用ViewPropertyAnimator类，该类对多属性动画进行了优化，会合并一些invalidate()来减少刷新视图，该类在3.1中引入。</p>
<p><code>view.animate()</code>方法会返回<code>ViewPropertyAnimator</code>类。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">myView.animate().x(<span class="number">50f</span>).y(<span class="number">100f</span>);</div></pre></td></tr></table></figure></p>
<p>的效果与上面的<code>PropertyValuesHolder</code>例子中的效果完全一致。<br>但是你有没有发现我们自始至终没有调用过<code>start()</code>方法，这是因为新的接口中使用了隐式启动动画的功能，只要我们将动画定义完成之后，动画就会自动启动。并且这个机制对于组合动画也同样有效，只要我们不断地添加新的方法，那么动画就不会立刻执行，等到所有在<code>ViewPropertyAnimator</code>上设置的方法都执行完毕后，动画就会自动启动。当然如果不想使用这一默认机制的话，我们也可以显式地调用<code>start()</code>方法来启动动画。</p>
<p>###XML中定义</p>
<p>在<code>res/animator</code>中定义对应的动画<code>xml</code>       </p>
<ul>
<li><animator>  对应代码中的ValueAnimator</animator></li>
<li><objectanimator>  对应代码中的ObjectAnimator</objectanimator></li>
<li><set>  对应代码中的AnimatorSet<br>例如:       </set></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">objectAnimator</span>   </span></div><div class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>   </div><div class="line">    <span class="attr">android:propertyName</span>=<span class="string">"scaleX"</span>  </div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"2000"</span>  </div><div class="line">    <span class="attr">android:valueFrom</span>=<span class="string">"1.0"</span>  </div><div class="line">    <span class="attr">android:valueTo</span>=<span class="string">"2.0"</span>  </div><div class="line">    <span class="attr">android:valueType</span>=<span class="string">"floatType"</span> </div><div class="line">    <span class="attr">android:repeatCount</span>=<span class="string">"1"</span>  </div><div class="line">    <span class="attr">android:repeatMode</span>=<span class="string">"reverse"</span>&gt;  </div><div class="line"><span class="tag">&lt;/<span class="name">objectAnimator</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这里说明一下<code>valueFrom</code>和<code>valueTo</code>:是动画开始和结束值，如果我们缩放，则它们对应的是倍数，如果我们平移则对应的就是距离了。</p>
<p>接下来就是调用了<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">scaleXAnimator = (ObjectAnimator)AnimatorInflater.loadAnimator(<span class="keyword">this</span>, R.animator.scalex);  </div><div class="line">scaleXAnimator.setTarget(btnScaleX);  </div><div class="line">scaleXAnimator.start();</div></pre></td></tr></table></figure></p>
<p>那如果我们要播放多个动画怎么办?<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>   </span></div><div class="line">    <span class="attr">android:ordering</span>=<span class="string">"together"</span>&gt;  </div><div class="line">    <span class="tag">&lt;<span class="name">objectAnimator</span>  </span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span>  </div><div class="line">        <span class="attr">android:propertyName</span>=<span class="string">"scaleX"</span>  </div><div class="line">        <span class="attr">android:repeatCount</span>=<span class="string">"1"</span>  </div><div class="line">        <span class="attr">android:repeatMode</span>=<span class="string">"reverse"</span>  </div><div class="line">        <span class="attr">android:valueFrom</span>=<span class="string">"1.0"</span>  </div><div class="line">        <span class="attr">android:valueTo</span>=<span class="string">"2.0"</span> &gt;  </div><div class="line">    <span class="tag">&lt;/<span class="name">objectAnimator</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">objectAnimator</span>  </span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span>  </div><div class="line">        <span class="attr">android:propertyName</span>=<span class="string">"scaleY"</span>  </div><div class="line">        <span class="attr">android:repeatCount</span>=<span class="string">"1"</span>  </div><div class="line">        <span class="attr">android:repeatMode</span>=<span class="string">"reverse"</span>  </div><div class="line">        <span class="attr">android:valueFrom</span>=<span class="string">"1.0"</span>  </div><div class="line">        <span class="attr">android:valueTo</span>=<span class="string">"2.0"</span> &gt;  </div><div class="line">    <span class="tag">&lt;/<span class="name">objectAnimator</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">animatorScaleSet = (AnimatorSet)AnimatorInflater.loadAnimator(<span class="keyword">this</span>, R.animator.scale);  </div><div class="line">animatorScaleSet.setTarget(btnScale);  </div><div class="line">animatorScaleSet.start();</div></pre></td></tr></table></figure>
<p><code>Android L</code>又增加了一种动画样式，叫做<code>Reveal Animation</code>。<br>首先来看一下效果:    </p>
<p><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/reveal.gif?raw=true" alt="image">    </p>
<p>可以直接通过<code>ViewAnimationUtils.createCircularReveal()</code>方法来创建。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Returns an Animator which can animate a clipping circle.</div><div class="line"> * &lt;p&gt;</div><div class="line"> * Any shadow cast by the View will respect the circular clip from this animator.</div><div class="line"> * &lt;p&gt;</div><div class="line"> * Only a single non-rectangular clip can be applied on a View at any time.</div><div class="line"> * Views clipped by a circular reveal animation take priority over</div><div class="line"> * &#123;<span class="doctag">@link</span> View#setClipToOutline(boolean) View Outline clipping&#125;.</div><div class="line"> * &lt;p&gt;</div><div class="line"> * Note that the animation returned here is a one-shot animation. It cannot</div><div class="line"> * be re-used, and once started it cannot be paused or resumed. It is also</div><div class="line"> * an asynchronous animation that automatically runs off of the UI thread.</div><div class="line"> * As a result &#123;<span class="doctag">@link</span> AnimatorListener#onAnimationEnd(Animator)&#125;</div><div class="line"> * will occur after the animation has ended, but it may be delayed depending</div><div class="line"> * on thread responsiveness.</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> view The View will be clipped to the animating circle.</div><div class="line"> * <span class="doctag">@param</span> centerX The x coordinate of the center of the animating circle, relative to</div><div class="line"> *                &lt;code&gt;view&lt;/code&gt;.</div><div class="line"> * <span class="doctag">@param</span> centerY The y coordinate of the center of the animating circle, relative to</div><div class="line"> *                &lt;code&gt;view&lt;/code&gt;.</div><div class="line"> * <span class="doctag">@param</span> startRadius The starting radius of the animating circle.</div><div class="line"> * <span class="doctag">@param</span> endRadius The ending radius of the animating circle.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Animator <span class="title">createCircularReveal</span><span class="params">(View view,</span></span></div><div class="line">        <span class="keyword">int</span> centerX,  <span class="keyword">int</span> centerY, <span class="keyword">float</span> startRadius, <span class="keyword">float</span> endRadius) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> RevealAnimator(view, centerX, centerY, startRadius, endRadius);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码如下:    </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">enterReveal</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> View myView = findViewById(R.id.my_view);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> cx = myView.getMeasuredWidth() / <span class="number">2</span>;</div><div class="line">    <span class="keyword">int</span> cy = myView.getMeasuredHeight() / <span class="number">2</span>;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> finalRadius = Math.max(myView.getWidth(), myView.getHeight()) / <span class="number">2</span>;</div><div class="line"></div><div class="line">    Animator anim =</div><div class="line">        ViewAnimationUtils.createCircularReveal(myView, cx, cy, <span class="number">0</span>, finalRadius);</div><div class="line"></div><div class="line">    anim.start();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">exitReveal</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> View myView = findViewById(R.id.my_view);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> cx = myView.getMeasuredWidth() / <span class="number">2</span>;</div><div class="line">    <span class="keyword">int</span> cy = myView.getMeasuredHeight() / <span class="number">2</span>;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> initialRadius = myView.getWidth() / <span class="number">2</span>;</div><div class="line"></div><div class="line">    Animator anim =</div><div class="line">        ViewAnimationUtils.createCircularReveal(myView, cx, cy, initialRadius, <span class="number">0</span>);</div><div class="line"></div><div class="line">    anim.addListener(<span class="keyword">new</span> AnimatorListenerAdapter() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationEnd</span><span class="params">(Animator animation)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>.onAnimationEnd(animation);</div><div class="line">            myView.setVisibility(View.INVISIBLE);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    anim.start();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>有关如何提高动画性能请看:<a href="https://github.com/CharonChui/AndroidNote/blob/master/Android%E5%8A%A0%E5%BC%BA/%E9%80%9A%E8%BF%87Hardware%20Layer%E6%8F%90%E9%AB%98%E5%8A%A8%E7%94%BB%E6%80%A7%E8%83%BD.md" target="_blank" rel="external">通过Hardware Layer提高动画性能</a></p>
<hr>
    </div>

    <div class="post-footer">   
        <div>
            
                转载声明: 商业转载请联系作者获得授权,非商业转载请注明出处 © Snippet
            
        </div>
        <div>
            
                版权声明: <a href="https://creativecommons.org/licenses/by-nc-nd/3.0/" target="_blank">
知识共享署名-非商业性使用-禁止演绎 3.0 未本地化版本许可协议（CC BY-NC-ND 3.0）
</a>
            
        </div>  
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2016/02/12/Android从入门到精通第三课(ContentProvider)/" class="pre-post btn btn-default"><i class="fa fa-angle-left fa-fw"></i>上一篇</a>
    
    
        <a href="/2016/02/10/Android从入门到精通第一课/" class="next-post btn btn-default">下一篇<i class="fa fa-angle-right fa-fw"></i></a>
    
</div>


    <div id="comments">
        <div id="uyan_frame"></div>
    <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2120654"></script>
    </div>
                </main>
                <aside class="col-md-4 sidebar">
        
        <div class="widget notification">
        <h3 class="title">网站公告</h3>
        <div>
            <p>主题Snippet v1.1.0版本即将上线，敬请期待~ <br>
主题下载：<a href="https://github.com/shenliyang/hexo-theme-snippet" title="fork me" target="_blank">Snippet主题</a> <br>
<hr>前端工程师一枚，专注于前端Node、React和移动端Android和Ios开发，欢迎骚扰。
<br>联系方式：qq群:278792776（移动群）、515980159（React群）、188716429（猎头hr群）
</p>
        </div>
    </div>
        
        <div class="widget">
        <h3 class="title">分类</h3>
        <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/"><i class="fa" aria-hidden="true">Android</i></a><span class="category-list-count">36</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/系统/"><i class="fa" aria-hidden="true">系统</i></a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Google/"><i class="fa" aria-hidden="true">Google</i></a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Google/VR/"><i class="fa" aria-hidden="true">VR</i></a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/"><i class="fa" aria-hidden="true">Java</i></a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/"><i class="fa" aria-hidden="true">Kotlin</i></a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/"><i class="fa" aria-hidden="true">Python</i></a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React-Native/"><i class="fa" aria-hidden="true">React Native</i></a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/"><i class="fa" aria-hidden="true">Spring</i></a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/"><i class="fa" aria-hidden="true">android</i></a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/"><i class="fa" aria-hidden="true">iOS</i></a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ios/"><i class="fa" aria-hidden="true">ios</i></a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/人工智能/"><i class="fa" aria-hidden="true">人工智能</i></a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/"><i class="fa" aria-hidden="true">前端</i></a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/"><i class="fa" aria-hidden="true">后端</i></a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/小程序/"><i class="fa" aria-hidden="true">小程序</i></a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术人生/"><i class="fa" aria-hidden="true">技术人生</i></a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/"><i class="fa" aria-hidden="true">机器学习</i></a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂谈/"><i class="fa" aria-hidden="true">杂谈</i></a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/"><i class="fa" aria-hidden="true">编程语言</i></a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/"><i class="fa" aria-hidden="true">设计模式</i></a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/资料库/"><i class="fa" aria-hidden="true">资料库</i></a><span class="category-list-count">1</span></li></ul>
    </div>
        
        <div class="widget">
      <h3 class="title">归档</h3>
        <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/"><i class="fa" aria-hidden="true">十一月 2017</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/"><i class="fa" aria-hidden="true">十月 2017</i></a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/"><i class="fa" aria-hidden="true">九月 2017</i></a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/"><i class="fa" aria-hidden="true">八月 2017</i></a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/"><i class="fa" aria-hidden="true">七月 2017</i></a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/"><i class="fa" aria-hidden="true">六月 2017</i></a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/"><i class="fa" aria-hidden="true">五月 2017</i></a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/"><i class="fa" aria-hidden="true">四月 2017</i></a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/"><i class="fa" aria-hidden="true">三月 2017</i></a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/"><i class="fa" aria-hidden="true">二月 2017</i></a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/"><i class="fa" aria-hidden="true">一月 2017</i></a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/"><i class="fa" aria-hidden="true">十二月 2016</i></a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/"><i class="fa" aria-hidden="true">十一月 2016</i></a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/"><i class="fa" aria-hidden="true">十月 2016</i></a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/"><i class="fa" aria-hidden="true">九月 2016</i></a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/"><i class="fa" aria-hidden="true">八月 2016</i></a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/"><i class="fa" aria-hidden="true">七月 2016</i></a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/"><i class="fa" aria-hidden="true">六月 2016</i></a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/"><i class="fa" aria-hidden="true">五月 2016</i></a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/"><i class="fa" aria-hidden="true">四月 2016</i></a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/"><i class="fa" aria-hidden="true">三月 2016</i></a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/"><i class="fa" aria-hidden="true">二月 2016</i></a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/"><i class="fa" aria-hidden="true">一月 2016</i></a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/"><i class="fa" aria-hidden="true">九月 2015</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/"><i class="fa" aria-hidden="true">六月 2015</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/"><i class="fa" aria-hidden="true">五月 2015</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/"><i class="fa" aria-hidden="true">四月 2015</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/"><i class="fa" aria-hidden="true">三月 2015</i></a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/"><i class="fa" aria-hidden="true">一月 2015</i></a><span class="archive-list-count">1</span></li></ul>
    </div>
        
        <div class="widget">
    <h3 class="title">标签云</h3>
    <div class="content tag-cloud">
      
        <a href="/tags/入门/" style="font-size: 1em">入门</a> <a href="/tags/Python/" style="font-size: 1em">Python</a> <a href="/tags/新特性/" style="font-size: 1em">新特性</a> <a href="/tags/深入系统/" style="font-size: 1em">深入系统</a> <a href="/tags/系统服务/" style="font-size: 1em">系统服务</a> <a href="/tags/android/" style="font-size: 1em">android</a> <a href="/tags/混淆打包/" style="font-size: 1em">混淆打包</a> <a href="/tags/硬件/" style="font-size: 1em">硬件</a> <a href="/tags/Angular2/" style="font-size: 1em">Angular2</a> <a href="/tags/前端开发/" style="font-size: 1em">前端开发</a> <a href="/tags/前端/" style="font-size: 1em">前端</a> <a href="/tags/React-Native/" style="font-size: 1em">React Native</a> <a href="/tags/FlexBox布局/" style="font-size: 1em">FlexBox布局</a> <a href="/tags/Google/" style="font-size: 1em">Google</a> <a href="/tags/VR/" style="font-size: 1em">VR</a> <a href="/tags/后端/" style="font-size: 1em">后端</a> <a href="/tags/Java/" style="font-size: 1em">Java</a> <a href="/tags/垃圾回收/" style="font-size: 1em">垃圾回收</a> <a href="/tags/Kotlin/" style="font-size: 1em">Kotlin</a> <a href="/tags/编程语言/" style="font-size: 1em">编程语言</a> <a href="/tags/OpenGL/" style="font-size: 1em">OpenGL</a> <a href="/tags/Node/" style="font-size: 1em">Node</a> <a href="/tags/Promise/" style="font-size: 1em">Promise</a> <a href="/tags/eact-Native/" style="font-size: 1em">eact Native</a> <a href="/tags/调试/" style="font-size: 1em">调试</a> <a href="/tags/打包/" style="font-size: 1em">打包</a> <a href="/tags/原生/" style="font-size: 1em">原生</a> <a href="/tags/Spring/" style="font-size: 1em">Spring</a> <a href="/tags/Android/" style="font-size: 1em">Android</a> <a href="/tags/ios/" style="font-size: 1em">ios</a> <a href="/tags/Swift/" style="font-size: 1em">Swift</a> <a href="/tags/swift/" style="font-size: 1em">swift</a> <a href="/tags/AR/" style="font-size: 1em">AR</a> <a href="/tags/知识库/" style="font-size: 1em">知识库</a> <a href="/tags/Xcode/" style="font-size: 1em">Xcode</a> <a href="/tags/webpack/" style="font-size: 1em">webpack</a> <a href="/tags/gulp/" style="font-size: 1em">gulp</a> <a href="/tags/iOS/" style="font-size: 1em">iOS</a> <a href="/tags/https/" style="font-size: 1em">https</a> <a href="/tags/gif/" style="font-size: 1em">gif</a> <a href="/tags/mac/" style="font-size: 1em">mac</a> <a href="/tags/环境/" style="font-size: 1em">环境</a> <a href="/tags/原理/" style="font-size: 1em">原理</a> <a href="/tags/react/" style="font-size: 1em">react</a> <a href="/tags/杂谈/" style="font-size: 1em">杂谈</a> <a href="/tags/个人博客/" style="font-size: 1em">个人博客</a> <a href="/tags/流量/" style="font-size: 1em">流量</a> <a href="/tags/小程序/" style="font-size: 1em">小程序</a> <a href="/tags/微信/" style="font-size: 1em">微信</a> <a href="/tags/全栈/" style="font-size: 1em">全栈</a> <a href="/tags/搭建网站/" style="font-size: 1em">搭建网站</a> <a href="/tags/机器学习/" style="font-size: 1em">机器学习</a> <a href="/tags/算法/" style="font-size: 1em">算法</a> <a href="/tags/内存分配/" style="font-size: 1em">内存分配</a> <a href="/tags/深入理解/" style="font-size: 1em">深入理解</a> <a href="/tags/人工智能/" style="font-size: 1em">人工智能</a> <a href="/tags/设计模式/" style="font-size: 1em">设计模式</a>
    </div>
  </div>
        
        <div class="widget">
        <h3 class="title">友链</h3>
        <div class="content friends-link">
        
            <a href="http://blog.csdn.net/xiangzhihong8/" class="fa" target="_blank">作者博客</a>
        
            <a href="https://yq.aliyun.com/u/xiangzhihong" class="fa" target="_blank">阿里云博客</a>
        
        </div>
    </div>
        
    </aside>
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<!--page counter part-->
<script>
function addCount (Counter) {
        url=$('.article-date').attr('href').trim();
        title = $('.article-title').text().trim();
        var query=new AV.Query(Counter);
        //use url as unique idnetfication
        query.equalTo("url",url);
        query.find({
            success: function(results){
                if(results.length>0)
                {
                    var counter=results[0];
                    counter.fetchWhenSave(true); //get recent result
                    counter.increment("time");
                    counter.save();
                }
                else
                {
                    var newcounter=new Counter();
                    newcounter.set("title",title);
                    newcounter.set("url",url);
                    newcounter.set("time",1);
                    newcounter.save(null,{
                        success: function(newcounter){
                        //alert('New object created');
                        },
                        error: function(newcounter,error){
                        alert('Failed to create');
                        }
                        });
                }
            },
            error: function(error){
                //find null is not a error
                alert('Error:'+error.code+" "+error.message);
            }
        });
}
$(function(){
        var Counter=AV.Object.extend("Counter");
        //only increse visit counting when intering a page
        if ($('.article-title').length == 1)
           addCount(Counter);
        var query=new AV.Query(Counter);
        query.descending("time");
        // the sum of popular posts
        query.limit(10); 
        query.find({
            success: function(results){
                    for(var i=0;i<results.length;i++)    
                    {
                        var counter=results[i];
                        title=counter.get("title");
                        url=counter.get("url");
                        time=counter.get("time");
                        // add to the popularlist widget
                        showcontent=title+" ("+time+")";
                        //notice the "" in href
                        $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                    }
                },
            error: function(error){
                alert("Error:"+error.code+" "+error.message);
            }
            }
        )
        });
</script>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017 
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>
<script src="/assets/highlight.pack.js?rev=@@hash"></script>
  <script>
    hljs.initHighlightingOnLoad(); //初始化代码高亮 
  </script>

<script src="/js/app.js?rev=@@hash"></script>
</body>
